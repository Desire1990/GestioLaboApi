(function(){"use strict";var t={834:function(t,e,s){var a=s(144),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("meta",{attrs:{name:"viewport",content:"width=device-width, initial-scale=1.0"}}),t.logged_in?e("div",{staticClass:"main"},[e("TheTopbar",{on:{togglenav:function(e){t.navOpen=!t.navOpen}}}),e("TheSidebar",{attrs:{open:t.navOpen}}),e("router-view")],1):e("div",[e("Login")],1)])},r=[],o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[e("div",{staticClass:"content"},[e("header",{staticStyle:{"background-color":"#11101d"}},[e("h2",{staticClass:"heading",attrs:{id:"dashboard"}},[t._v(" Gestion Laboratoire ")]),t._m(0),e("router-link",{staticClass:"button is-success",attrs:{to:"/cart"}},[e("div",{staticClass:"user-wrapper"},[e("div",[e("a",{staticClass:"fa-solid fa-cart-shopping"})]),0!=t.cartTotalLength?e("div",[e("i",{staticClass:"fa fa-shopping-cart",staticStyle:{"font-size":"36px"}},[t._v("("+t._s(t.cartTotalLength)+")")])]):t._e()])]),e("div",{staticClass:"user-wrapper",on:{click:t.loggout}},[t._m(1)])],1)])])},n=[function(){var t=this,e=t._self._c;return e("label",{attrs:{for:"nav-toggle"}},[e("span",{staticClass:"fas fa-bars"})])},function(){var t=this,e=t._self._c;return e("div",[e("a",{staticClass:"fa fa-sign-out desos",staticStyle:{"font-size":"36px",color:"red"}})])}],l=s(669),c=s.n(l),d={data(){return{cart:{items:[]}}},beforeCreate(){this.$store.commit("initiallizeStore");const t=this.$store.state.token;c().defaults.headers.common.Authorization=t?"Token "+t:""},mounted(){this.cart=this.$store.state.cart;var t=JSON.parse(localStorage.getItem("user"));t?this.$store.state.user=t:console.warn("il y'a pas de session")},watch:{"$store.state.user":{deep:!0,handler(t){localStorage.setItem("user",JSON.stringify(t))}}},computed:{logged_in(){return null!=this.$store.state.user},cartTotalLength(){let t=0;for(let e=0;e<this.cart.items.length;e++)t+=parseFloat(this.cart.items[e].quantity);return t}},methods:{loggout(){if(confirm("Are you sure you wanna logout?")){this.$store.state.user=null;const t=this.$route.query.to||"/";this.$router.push(t),toast({message:" Welcome back!!! logged out successfully!",type:"is-success",dismissible:!0,duration:2e3,position:"center"}),this.$router.push("/")}}}},u=d,m=s(1),p=(0,m.Z)(u,o,n,!1,null,"0a024616",null),h=p.exports,v=function(){var t=this,e=t._self._c;return e("div",{staticClass:"sidebar",class:t.isOpened?"open":"",style:t.cssVars},[e("div",{staticClass:"logo-details",staticStyle:{margin:"6px 14px 0 14px"}},[t.menuLogo?e("img",{staticClass:"menu-logo icon",attrs:{src:t.menuLogo,alt:"menu-logo"}}):e("i",{staticClass:"bx icon",class:t.menuIcon}),e("div",{staticClass:"logo_name"},[t._v(" "+t._s(t.menuTitle)+" ")]),e("i",{staticClass:"bx",class:t.isOpened?"bx-menu-alt-right":"bx-menu",attrs:{id:"btn"},on:{click:function(e){t.isOpened=!t.isOpened}}})]),e("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"space-between","flex-grow":"1","max-height":"calc(100% - 60px)"}},[e("div",{staticStyle:{margin:"6px 14px 0 14px"},attrs:{id:"my-scroll"}},[e("ul",{staticClass:"nav-list",staticStyle:{overflow:"visible"}},t._l(t.menuItems,(function(s,a){return e("span",{key:a},[t.has_permission(s)?e("li",[e("router-link",{attrs:{to:s.link}},[e("i",{staticClass:"bx",class:s.icon||"bx-square-rounded"}),e("span",{staticClass:"links_name"},[t._v(t._s(s.name))]),e("span",{staticClass:"tooltip"},[t._v(t._s(s.tooltip||s.name))])])],1):t._e()])})),0)]),t.isLoggedIn?e("div",{staticClass:"profile"},[e("div",{staticClass:"profile-details"},[t.profileImg?e("img",{attrs:{src:t.profileImg,alt:"profileImg"}}):e("i",{staticClass:"bx bxs-user-rectangle"}),e("div",{staticClass:"name_job"},[e("div",{staticClass:"name"},[e("h3",[t._v(t._s(this.user.username))])])])]),t.isExitButton?e("i",{staticClass:"bx bx-log-out-circle",attrs:{id:"log_out"},on:{click:function(e){return e.stopPropagation(),t.loggout.apply(null,arguments)}}}):t._e()]):t._e()])])},_=[],f={name:"SidebarMenuAkahon",props:{
//! Menu settings
isMenuOpen:{type:Boolean,default:!0},menuTitle:{type:String,default:"Gestion Labo"},menuLogo:{type:String,default:s(285)},menuIcon:{type:String,default:"bxl-c-plus-plus"},isPaddingLeft:{type:Boolean,default:!0},menuOpenedPaddingLeftBody:{type:String,default:"250px"},menuClosedPaddingLeftBody:{type:String,default:"78px"},
//! Menu items
menuItems:{type:Array,default:()=>[{link:"/",name:"Dashboard",tooltip:"Dashboard",icon:"bx-grid-alt"},{link:"/users",name:"Users",tooltip:"User",icon:"bx-user",user:"admin"},{link:"/stock",name:"Stock Centrale",tooltip:"Messages",icon:"bx-store",user:"admin"},{link:"/stock-labo",name:"Stock",tooltip:"Messages",icon:"bx-store-alt"},{link:"/statistic",name:"Analytics",tooltip:"Analytics",icon:"bx-pie-chart-alt-2"},{link:"/orders",name:"Orders",tooltip:"Order",icon:"bx-cart-alt"},{link:"/command",name:"Commande",tooltip:"commande",icon:"bx-command"},{link:"/bon-commande",name:"Bon commande",tooltip:"Setting",icon:"bx-command"}]},
//! Search
isSearch:{type:Boolean,default:!0},searchPlaceholder:{type:String,default:"Search..."},searchTooltip:{type:String,default:"Search"},
//! Profile detailes
profileImg:{type:String,default:s(285)},profileName:{type:String,default:"Gestion"},profileRole:{type:String,default:"Labo UB"},isExitButton:{type:Boolean,default:!0},isLoggedIn:{type:Boolean,default:!0},
//! Styles
bgColor:{type:String,default:"#11101d"},secondaryColor:{type:String,default:"#1d1b31"},homeSectionColor:{type:String,default:"#e4e9f7"},logoTitleColor:{type:String,default:"#fff"},iconsColor:{type:String,default:"#fff"},itemsTooltipColor:{type:String,default:"#e4e9f7"},searchInputTextColor:{type:String,default:"#fff"},menuItemsHoverColor:{type:String,default:"#fff"},menuItemsTextColor:{type:String,default:"#fff"},menuFooterTextColor:{type:String,default:"#fff"}},data(){return{isOpened:!1,user:this.$store.state.user}},mounted(){this.isOpened=this.isMenuOpen},computed:{cssVars(){return{"--bg-color":this.bgColor,"--secondary-color":this.secondaryColor,"--home-section-color":this.homeSectionColor,"--logo-title-color":this.logoTitleColor,"--icons-color":this.iconsColor,"--items-tooltip-color":this.itemsTooltipColor,"--serach-input-text-color":this.searchInputTextColor,"--menu-items-hover-color":this.menuItemsHoverColor,"--menu-items-text-color":this.menuItemsTextColor,"--menu-footer-text-color":this.menuFooterTextColor}}},watch:{isOpened(){window.document.body.style.paddingLeft=this.isOpened&&this.isPaddingLeft?this.menuOpenedPaddingLeftBody:this.menuClosedPaddingLeftBody}},mounted(){var t=JSON.parse(localStorage.getItem("user"));t?this.$store.state.user=t:console.warn("il y'a pas de session")},methods:{has_permission(t){return!t.user||!!this.$store.state.user.groups.includes(t.user)},loggout(){confirm("Are you sure you wanna logout?")&&(this.$store.state.user=null)}}},g=f,b=(0,m.Z)(g,v,_,!1,null,"1b50e745",null),y=b.exports,C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"centered"},[e("div",{staticClass:"vertical-center"},[e("div",{staticClass:"inner-block"},[e("form",{staticClass:"login"},[e("center",[e("img",{attrs:{src:s(285),alt:"",width:"80px",height:"80px"}}),e("h1",{staticStyle:{color:"var(--primary)","font-size":"36px"}},[t._v("Gestion Laboratoire")])]),e("div",{staticClass:"form-group"},[t._m(0),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control form-control-lg",attrs:{type:"email",name:"email",placeholder:"Username",required:"",id:"id_mail",autocomplete:"on"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),e("div",{staticClass:"form-group"},[t._m(1),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control form-control-lg",attrs:{type:"password",placeholder:"password",name:"password",required:"",id:"id_password",autocomplete:"on"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t.logs.length>0?e("label",{staticStyle:{color:"red"},attrs:{for:"id_password"}},[t._v(t._s(t.logs))]):t._e(),e("button",{staticClass:"btn btn-lg btn-block btns",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[t._v("Sign In")]),e("p",{staticClass:"forgot-password text-right mt-2 mb-4"},[e("router-link",{attrs:{to:"/forgot-password"}},[e("strong",[t._v("Forgot password ?")])])],1),e("center",[t._v(" Developped by "),e("b",[e("a",{attrs:{href:"https://github.com/Desire1990"}},[t._v("Desos")])])])],1)])])])},w=[function(){var t=this,e=t._self._c;return e("label",[e("h3",[t._v("Username")])])},function(){var t=this,e=t._self._c;return e("label",[e("h3",[t._v("Password")])])}],x=s(792),$={data(){return{logs:"",username:"",password:"",url:this.$store.state.url}},mounted(){document.title="Sign in | GestionⒸLabo"},methods:{login(){this.logs="loging in...",c().post(this.url+"/login/",{username:this.username,password:this.password}).then((t=>{this.$store.state.user=t.data;const e=this.$route.query.to||"/";this.$router.push(e),(0,x.toast)({message:"logged in successfully!",type:"is-success",dismissible:!0,duration:2e3,position:"center"}),this.$router.push("/")})).catch((t=>{t.response?this.logs="Invalid username or password...":this.logs=JSON.stringify(t.response.data)}))}}},S=$,k=(0,m.Z)(S,C,w,!1,null,"c44d45f8",null),q=k.exports,P={name:"App",data:()=>({navOpen:!0,cartCount:0}),components:{TheTopbar:h,TheSidebar:y,Login:q},computed:{logged_in(){return null!=this.$store.state.user}},mounted(){var t=JSON.parse(localStorage.getItem("user"));t?this.$store.state.user=t:console.warn("il y'a pas de session")},watch:{"$store.state.user":{deep:!0,handler(t){localStorage.setItem("user",JSON.stringify(t))}}},methods:{loggout(){confirm("êtes vous sur de vouloir se deconnecter?")&&(this.$store.state.user=null)}}},D=P,N=(0,m.Z)(D,i,r,!1,null,null,null),L=N.exports,O=s(345),I=function(){var t=this,e=t._self._c;return e("domain")},T=[],A=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"vue"}},[e("h1",[t._v("Sélectionnez un domaine ci-contre")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading"}),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"images-wrapper"},[e("transition-group",{staticClass:"images-inner",attrs:{name:"image-wrapper",tag:"div"}},t._l(t.domains.results,(function(s,a){return e("div",{key:s.id+a,staticClass:"image-wrapper"},[e("div",{staticClass:"image-img"},[e("img",{staticClass:"card-img-top",attrs:{src:"https://memoire.amidev.bi"+s.get_thumbnail,alt:"image.name"}})]),e("div",{staticClass:"image-details"},[e("h3",{staticClass:"image-title"},[e("router-link",{attrs:{to:{name:"category",params:{id:s.id}}}},[t._v(t._s(s.name))])],1)])])})),0)],1)])},F=[],B={data(){return{loading:!1,imagesLimit:15,allLoaded:!1,liveSearchString:"",domains:this.$store.state.domains}},mounted(){c().get(this.$store.state.url+"/domain/",this.header).then((t=>{this.domains=t.data,console.log(t.data)})).catch((t=>{console.error(t)}))},computed:{header(){return{headers:{Authorization:`Bearer ${this.$store.state.user.access}`}}}}},E=B,Z=(0,m.Z)(E,A,F,!1,null,"34f10b48",null),U=Z.exports,j={components:{domain:U},mounted(){document.title="Dashboard | Gestion Labo"}},z=j,J=(0,m.Z)(z,I,T,!1,null,null,null),Q=J.exports,R=function(){var t=this,e=t._self._c;return e("div",{staticClass:"parent"},[e("div",{staticClass:"form-inline my-2 my-lg-0 top",staticStyle:{padding:"20px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search_term,expression:"search_term"}],staticClass:"form-control mr-sm-2",attrs:{type:"text",placeholder:"Search","aria-label":"Search"},domProps:{value:t.search_term},on:{input:function(e){e.target.composing||(t.search_term=e.target.value)}}}),e("button",{attrs:{type:"reset"},on:{click:function(e){t.search_term=""}}},[t._v("×")])]),e("div",{staticClass:"btns"},[e("button",{on:{click:t.generateCSV}},[e("fa",{attrs:{icon:"download"}}),t._v(" Download")],1),e("button",{on:{click:function(t){t.preventDefault()}}},[e("fa",{attrs:{icon:"upload"}}),t._v(" Upload ")],1),e("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"text/csv"},on:{change:t.uploadCSV}})]),e("div",{staticClass:"recycler"}),e("div",{staticClass:"scrollable-tab"},[e("table",{staticClass:"table paiements"},[e("thead",[e("tr",{staticClass:"panier-item"},[e("th",[t._v("#")]),e("th",[t._v("Categorie")]),e("th",[t._v("Reference")]),e("th",[t._v("Materiel")]),e("th",[t._v("Designation")]),e("th",[t._v("Quantites")]),e("th",[t._v("Date de Peremption")]),e("th",[t._v("Status")]),e("th",[e("button",{on:{click:function(e){t.add_mode=!0}}},[t._v("Create")])])])]),e("tbody",{attrs:{id:"paiements"}},t._l(t.items.results,(function(s,a){return e("tr",{key:s.id,class:t.level(s.quantite)},[e("td",[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.category.name))]),e("td",[t._v(t._s(s.reference))]),e("td",[t._v(t._s(s.materiel))]),e("td",[t._v(t._s(s.designation))]),e("td",[t._v(t._s(s.quantite)+" "+t._s(s.unite))]),e("td",[t._v(t._s(t.datetime(s.date_peremption)))]),e("td",[t._v(t._s(s.status))]),e("td",[e("div",{staticClass:"btns"},[e("button",{on:{click:function(e){return e.preventDefault(),t.startEdit(s)}}},[t._v("Edit")]),e("button",{on:{click:function(e){return e.preventDefault(),t.startCommande(s)}}},[t._v("Add")])])])])})),0)])]),e("EditDialog",{attrs:{visible:t.edit_mode,produit:t.active_item},on:{close:t.exitEdition}}),e("AchatDialog",{attrs:{visible:t.achat_mode,produit:t.active_item},on:{close:t.exitEdition}}),e("ProduitDialog",{attrs:{visible:t.add_mode},on:{close:t.exitEdition}})],1)},M=[],V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"Keyword",id:"id_username",autofocus:""},domProps:{value:t.keyword},on:{keydown:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),e("button",{attrs:{type:"reset"},on:{click:function(e){t.keyword=""}}},[t._v("×")]),t.show_date?e("div",{staticStyle:{display:"inline"}},[e("button",{staticStyle:{"margin-left":"0"}},[t._v(" Date ")]),t.triggered?e("div",{staticClass:"form"},[e("label",[t._v("Du:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.date.du,expression:"date.du"}],attrs:{type:"date",name:"date_du"},domProps:{value:t.date.du},on:{input:function(e){e.target.composing||t.$set(t.date,"du",e.target.value)}}}),e("label",[t._v("Au:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.date.au,expression:"date.au"}],attrs:{type:"date",name:"date_au"},domProps:{value:t.date.au},on:{input:function(e){e.target.composing||t.$set(t.date,"au",e.target.value)}}}),e("input",{staticStyle:{border:"1px solid black"},attrs:{type:"submit",value:"search"},on:{click:t.performSearch}})]):t._e()]):t._e()])},G=[],Y={props:{show_date:{type:Boolean,default:!1}},components:{},data(){return{keyword:"",date:{du:null,au:null},triggered:!1}},watch:{keyword(t){this.$emit("searched",t)}},methods:{performSearch(){this.triggered=!1,this.$emit("changed",this.date)},changeColor(t){"red"==t&&(document.documentElement.style.setProperty("--primary","#d55"),document.documentElement.style.setProperty("--primary-light","#faa"),document.documentElement.style.setProperty("--hover","#faa")),"green"==t&&(document.documentElement.style.setProperty("--primary","green"),document.documentElement.style.setProperty("--primary-light","#595"),document.documentElement.style.setProperty("--hover","#595")),"blue"==t&&(document.documentElement.style.setProperty("--primary","#08a"),document.documentElement.style.setProperty("--primary-light","lightblue"),document.documentElement.style.setProperty("--hover","#29b"))}}},H=Y,W=(0,m.Z)(H,V,G,!1,null,"c9fbae60",null),K=W.exports,X=function(){var t=this,e=t._self._c;return e("div",{class:{popup:!0,active:t.visible},on:{click:t.close}},[e("div",{staticClass:"popup-body",on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[e("center",[e("h3",[t._v("Modifier "+t._s(t.produit.materiel))])]),e("form",{attrs:{method:"post"}},[e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_unite"}},[t._v("Materiel:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_produit.materiel,expression:"new_produit.materiel"}],attrs:{type:"text",id:"id_unite"},domProps:{value:t.new_produit.materiel},on:{input:function(e){e.target.composing||t.$set(t.new_produit,"materiel",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_unite"}},[t._v("Reference")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_produit.reference,expression:"new_produit.reference"}],attrs:{type:"text",id:"id_unite"},domProps:{value:t.new_produit.reference},on:{input:function(e){e.target.composing||t.$set(t.new_produit,"reference",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_prix"}},[t._v("Quantite:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_produit.quantite,expression:"new_produit.quantite"}],attrs:{type:"number",name:"prix",placeholder:"prix",required:"",id:"id_quantite"},domProps:{value:t.new_produit.quantite},on:{input:function(e){e.target.composing||t.$set(t.new_produit,"quantite",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_sortant"}},[t._v("Unité:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_produit.unite,expression:"new_produit.unite"}],attrs:{type:"text",id:"id_sortant",placeholder:"kg, l, g, mg, ml, ..."},domProps:{value:t.new_produit.unite},on:{input:function(e){e.target.composing||t.$set(t.new_produit,"unite",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"status"}},[t._v("Status:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.new_produit.status,expression:"new_produit.status"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.new_produit,"status",e.target.multiple?s:s[0])}}},[e("option",{attrs:{disabled:"",value:""}},[t._v("Selectionnez le status du materiel ...")]),e("option",[t._v("fonctionel")]),e("option",[t._v("non-fonctionel")]),e("option",[t._v("reparable")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_produit.status,expression:"new_produit.status"}],attrs:{type:"text",id:"id_sortant",placeholder:"kg, l, g, mg, ml, ..."},domProps:{value:t.new_produit.status},on:{input:function(e){e.target.composing||t.$set(t.new_produit,"status",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_rapport"}},[t._v("Date de Peremption:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_produit.date_peremption,expression:"new_produit.date_peremption"}],attrs:{type:"text",id:"id_rapport"},domProps:{value:t.new_produit.date_peremption},on:{input:function(e){e.target.composing||t.$set(t.new_produit,"date_peremption",e.target.value)}}})]),e("div",{staticClass:"buttons"},[e("div",{staticClass:"logs"},[t._v(t._s(t.logs))]),e("input",{attrs:{type:"submit",value:"Modifier"},on:{click:t.changerPrix}})])])],1)])},tt=[],et={props:{visible:{type:Boolean,default:!1},produit:{type:Object,required:!0}},data(){return{logs:"",new_price:"",new_produit:""}},watch:{produit(t){this.new_produit=JSON.parse(JSON.stringify(t))}},methods:{close(){this.$emit("close")},changerPrix(){let t={headers:{Authorization:"Bearer "+this.$store.state.user.access}};c().put(this.$store.state.url+`/produit/${this.produit.id}/`,this.new_produit,t).then((t=>{let e=this.$store.state.produits;for(var s=0;s<e.length;s++){let a=e[s];a.id==this.produit.id&&(this.$store.state.produits[s]=t.data,this.$emit("close"))}})).catch((t=>{console.error(t)}))}}},st=et,at=(0,m.Z)(st,X,tt,!1,null,"b20a1590",null),it=at.exports,rt=function(){var t=this,e=t._self._c;return e("div",{class:{popup:!0,active:t.visible},on:{click:t.close}},[e("div",{ref:"modal",staticClass:"popup-body",on:{click:function(t){t.stopPropagation()}}},[e("center",[e("h3",[t._v("Ajouter un Produit")])]),e("form",{attrs:{method:"post"}},[e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_nom"}},[t._v("Nom du Laboratoire")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.laboratoire.name,expression:"laboratoire.name"}],attrs:{type:"text",list:"noms",id:"id_nom"},domProps:{value:t.laboratoire.name},on:{change:t.setId,input:function(e){e.target.composing||t.$set(t.laboratoire,"name",e.target.value)}}})]),e("datalist",{attrs:{id:"noms"}},t._l(t.categories.results,(function(t){return e("option",{domProps:{value:t.name}})})),0),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_nom"}},[t._v("Materiel:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.produit.materiel,expression:"produit.materiel"}],attrs:{type:"text",id:"id_nom",placeholder:"le nom du produit"},domProps:{value:t.produit.materiel},on:{input:function(e){e.target.composing||t.$set(t.produit,"materiel",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_nom"}},[t._v("Reference:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.produit.reference,expression:"produit.reference"}],attrs:{type:"text",id:"id_nom",placeholder:"la reference du produit"},domProps:{value:t.produit.reference},on:{input:function(e){e.target.composing||t.$set(t.produit,"reference",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_nom"}},[t._v("Designation:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.produit.designation,expression:"produit.designation"}],attrs:{type:"text",id:"id_nom",placeholder:"le description du produit"},domProps:{value:t.produit.designation},on:{input:function(e){e.target.composing||t.$set(t.produit,"designation",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_nom"}},[t._v("Quantite:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.produit.quantite,expression:"produit.quantite"}],attrs:{type:"number",id:"id_nom",placeholder:"le description du produit"},domProps:{value:t.produit.quantite},on:{input:function(e){e.target.composing||t.$set(t.produit,"quantite",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_entrant"}},[t._v("Unité :")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.produit.unite,expression:"produit.unite"}],attrs:{name:"unite",id:"",value:"Selectionnez l'unite"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.produit,"unite",e.target.multiple?s:s[0])}}},[e("option",{attrs:{disabled:"",value:"Selectionnez l'unite"}},[t._v("Selectionnez l'unite ...")]),e("option",[t._v("kg")]),e("option",[t._v("g")]),e("option",[t._v("pc(s)")]),e("option",[t._v("l")]),e("option",[t._v("ml")])])]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_entrant"}},[t._v("Status :")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.produit.status,expression:"produit.status"}],attrs:{name:"status",id:"",value:"Selectionnez le status du materiel"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.produit,"status",e.target.multiple?s:s[0])}}},[e("option",{attrs:{disabled:"",value:" "}},[t._v("Selectionnez le status du materiel ...")]),e("option",[t._v("fonctionel")]),e("option",[t._v("non-fonctionel")]),e("option",[t._v("reparable")])])]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_prix"}},[t._v("date de peremption:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.produit.date_peremption,expression:"produit.date_peremption"}],attrs:{type:"date",name:"prix",placeholder:"date de peremption",id:"id_prix"},domProps:{value:t.produit.date_peremption},on:{input:function(e){e.target.composing||t.$set(t.produit,"date_peremption",e.target.value)}}})]),e("div",{staticClass:"logs"},[t._v(t._s(t.logs))]),e("div",{staticClass:"buttons"},[e("button",{ref:"submit",on:{click:function(e){return e.preventDefault(),t.createProduct.apply(null,arguments)}}},[t._v(" Créer ")])])])],1)])},ot=[],nt={props:{visible:{type:Boolean,default:!1},modelaVisible:!0},data(){return{laboratoire:{name:""},logs:"",produit:{},new_price:"",csv_array:[],csvData:{size:0,fileData:[]}}},watch:{csv_array(t){if(0==t.length)return this.logs="",void(this.$refs.submit.innerText="Créer");this.logs=t.length+" produits chargés",this.$refs.submit.innerText="upload"}},computed:{categories(){return this.$store.state.categories},rapport(){let t="1 "+this.produit.unite+" vaut combien de "+this.produit.unite_sortant+"?";return this.produit.unite_sortant?t:"1 par defaut"},unite_sortant(){return this.produit.unite?this.produit.unite+" par defaut":"exemples: kg,carton,casier..."},headers(){return{headers:{Authorization:"Bearer "+this.$store.state.user.access}}}},mounted(){this.categories.length<1&&c().get(this.$store.state.url+"/category/",this.headers).then((t=>{this.$store.state.categories=t.data})).catch((t=>{})),this.fetchProducts()},methods:{setId(){for(let t of this.$store.state.categories)if(t.id==this.laboratoire.id)return void(this.laboratoire.name=t.name)},setName(){for(let t of this.$store.state.categories)if(t.name==this.laboratoire.name)return void(this.laboratoire.id=t.id)},close(){this.$emit("close")},uploadCSV(){c().post(this.$store.state.url+"/produit/",this.csv_array,this.headers).then((t=>{this.$store.state.products=this.$store.state.produits.concat(t.data),this.csv_array=[],this.close()})).catch((t=>{console.error(t)}))},fetchProducts(){c().get(this.$store.state.url+"/produit/",this.headers).then((t=>{this.$store.state.products=t.data})).catch((t=>{console.error(t)}))},createProduct(){this.produit.materiel?this.produit.unite?this.produit.date_peremption?this.produit.designation?this.produit.status?this.produit.reference?(this.produit.quantite||(this.produit.quantite=0,this.logs=""),this.produit.category||(this.produit.category=this.laboratoire,this.logs=""),c().post(this.$store.state.url+"/produit/",this.produit,this.headers).then((t=>{this.data={},this.$store.state.products.push(t.data),this.fetchProducts(),this.$emit("close")})).catch((t=>{console.error(t)}))):this.logs="la reference est obligatoire":this.logs="status est obligatoire":this.logs="la date est obligatoire":this.logs="la date de peremption est obligatoire":this.logs="l'unité est obligatoire":this.logs="le materiel est obligatoire"},download(t){const e=new Blob([t],{type:"text/csv"}),s=window.URL.createObjectURL(e),a=document.createElement("a");a.setAttribute("hidden",""),a.setAttribute("href",s),a.setAttribute("download","model.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},generateCSV(){let t='"sep=;"\nnom;unite;unite_sortant;rapport;prix_vente\n';this.download(t)},onPickFile(){this.$refs.fileInput.click()},loadCSV(t){if(t.target.files&&t.target.files[0]){let e=new FileReader;e.readAsBinaryString(t.target.files[0]),e.onload=t=>{this.csvData.size=t.total,this.csvData.fileData=t.target.result;let e=this.convertToJSON(this.csvData.fileData);this.csv_array=e}}},convertToJSON(t){let e=t.trim().split("\n"),s=[],a=e[0].trim().split(";"),i=[],r={};e=e.slice(1);for(let o=0;o<e.length;o++){i=e[o].trim().split(";");for(let t=0;t<i.length;t++)r[a[t]]=i[t];s.push(r),r={}}return s}}},lt=nt,ct=(0,m.Z)(lt,rt,ot,!1,null,"a10b6df2",null),dt=ct.exports,ut=function(){var t=this,e=t._self._c;return e("div",{class:{popup:!0,active:t.visible},on:{click:t.close}},[e("div",{staticClass:"popup-body",on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[e("center",[e("h3",[t._v("Augmenter "+t._s(t.produit.materiel))])]),e("form",{attrs:{method:"post"}},[e("div",{staticClass:"inline_field"},[e("div",{staticClass:"field"},[e("label",{attrs:{for:"lg_qtt"}},[t._v(t._s(t.produit.reference)+":")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.lg_qtt,expression:"lg_qtt"}],attrs:{type:"number",id:"lg_qtt"},domProps:{value:t.lg_qtt},on:{input:function(e){e.target.composing||(t.lg_qtt=e.target.value)}}})])]),e("div",{staticClass:"inline_field"},[e("div",{staticClass:"field"},[e("label",{attrs:{for:"lg_qtt"}},[t._v("Quantite in Stock "+t._s(t.produit.quantite)+t._s(t.produit.unite)+":")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.lg_qtt,expression:"lg_qtt"}],attrs:{type:"number",id:"lg_qtt"},domProps:{value:t.lg_qtt},on:{input:function(e){e.target.composing||(t.lg_qtt=e.target.value)}}})])]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_prix"}},[t._v("Details:")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.details,expression:"details"}],attrs:{name:"prix"},domProps:{value:t.details},on:{input:function(e){e.target.composing||(t.details=e.target.value)}}})]),e("div",{staticClass:"buttons"},[e("div",{staticClass:"logs"},[t._v(t._s(t.logs))]),e("input",{attrs:{type:"submit",value:"submit"},on:{click:t.submit}})])])],1)])},mt=[],pt={props:{visible:{type:Boolean,default:!1},produit:{type:Object,required:!0},achat:{type:Object,required:!1}},data(){return{payee:0,lg_qtt:0,total:0,logs:"",sm_qtt:0,prix:0,details:""}},computed:{qttTotal(){return this.produit.quantite+1*this.sm_qtt},headers(){return{headers:{Authorization:"Bearer "+this.$store.state.user.access}}}},watch:{achat(t){console.log(t),this.produit.quantite>=0?this.lg_qtt=t.quantite:this.sm_qtt=t.quantite,this.total=t.prix_total}},methods:{close(){this.lg_qtt=0,this.sm_qtt=0,this.$emit("close")},submit(){this.achat?this.performEdition():this.performAchat()},performAchat(){let t={quantite:this.qttTotal,details:this.details,produit:this.produit.id},e=this.$store.state.url;c().post(e+"/achat/",t,this.headers).then((t=>{let e=this.$store.state.products,s=e.find((t=>t.id==this.produit.id));this.$store.state.products.unshift(t.data),s?(s.quantite+=t.data.quantite,this.$emit("close")):this.logs="quelque chose a mal tourné"})).catch((t=>{t.response?this.logs=t.response.data.status:this.logs="une erreur est survenue"}))},performEdition(){let t={quantite:this.qttTotal,details:this.details,prix_total:this.total,produit:this.produit.id},e=this.$store.state.url;c().put(e+`/achat/${this.achat.id}/`,t,this.headers).then((t=>{this.produit.quantite-=this.achat.quantite,this.achat.quantite=t.data.quantite,this.produit.quantite+=t.data.quantite,this.achat.prix_total=t.data.prix_total,this.achat.prix_unitaire=t.data.prix_unitaire,this.$emit("close")})).catch((t=>{t.response?this.logs=t.response.data.status:this.logs="une erreur est survenue"}))}}},ht=pt,vt=(0,m.Z)(ht,ut,mt,!1,null,"f79d094c",null),_t=vt.exports,ft={components:{EditDialog:it,AchatDialog:_t,ProduitDialog:dt,SearchBar:K},data(){return{csvData:{},items:this.$store.state.products,datas:[],active_item:{},edit_mode:!1,achat_mode:!1,add_mode:!1,search_term:""}},watch:{"$store.state.products"(t){this.items=t},search_term(t){this.dosearch(t)}},methods:{dosearch(t){c().get(this.$store.state.url+`/produit/?search=${this.search_term}`,this.header).then((t=>{this.$store.state.products=t.data})).catch((t=>{console.error(t)}))},performFilter(t){let e=this.$store.state.products.filter((e=>e.id==t|e.nom.toLowerCase().includes(t.toLowerCase())));this.items=e},fetchProducts(){c().get(this.$store.state.url+"/produit/",this.header).then((t=>{this.$store.state.products=t.data,this.items=t.data,this.datas=t.data.results,console.log(t.data)})).catch((t=>{if("token_not_valid"==t.response.data.code){let t={refresh:this.$store.state.user.refresh};c().post(this.$store.state.url+"/refresh/",t).then((t=>{this.$store.state.user.access=t.data.access,this.fetchProducts()})).catch((t=>{this.$store.state.user=null}))}}))},exitEdition(){this.active_item={},this.edit_mode=!1,this.achat_mode=!1,this.add_mode=!1},startEdit(t){this.active_item=t,this.edit_mode=!0},startCommande(t){this.active_item=t,this.achat_mode=!0},performFilter(t){let e=this.$store.state.products.filter((e=>e.id==t|e.nom.toLowerCase().includes(t.toLowerCase())));this.items=e},download(t){const e=new Blob([t],{type:"text/csv"}),s=window.URL.createObjectURL(e),a=document.createElement("a");a.setAttribute("hidden",""),a.setAttribute("href",s),a.setAttribute("download","data.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},generateCSV(){let t=this.datas,e="id,Reference,Materiel,Designation,Quantite,Status\n";for(var s=0;s<t.length;s++)e+=t[s].id+","+t[s].reference+","+t[s].materiel+","+t[s].designation+","+t[s].quantite+t[s].unite+","+t[s].status+"\n";this.download(e)},level(t){return 0==t?"empty":t<=5?"low":void 0},onPickFile(){this.$refs.fileInput.click()},uploadCSV(t){if(t.target.files&&t.target.files[0]){let e=new FileReader;e.readAsBinaryString(t.target.files[0]),e.onload=t=>{console.log(t),this.csvData.size=t.total,this.csvData.fileData=t.target.result;let e=this.convertToJSON(this.csvData.fileData);console.log(e),console.table(e)}}},convertToJSON(t){let e=t.trim().split("\n"),s=[],a=e[0].split(";"),i=[],r={};e=e.slice(1);for(let o=0;o<e.length;o++){i=e[o].split(";");for(let t=0;t<i.length;t++)if(0===i.indexOf(i[t])||isNaN(i[t]))r[a[t]]=i[t];else{let e=Number.parseFloat(i[t]);r[a[t]]=e.toFixed(2)}s.push(r),r={}}return s}},mounted(){document.title="Stock |produits",this.fetchProducts()}},gt=ft,bt=(0,m.Z)(gt,R,M,!1,null,"7d891246",null),yt=bt.exports,Ct=function(){var t=this,e=t._self._c;return e("domain")},wt=[],xt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"products"},[e("router-link",{staticClass:"button is-success",attrs:{to:"/cart-order",id:"cart"}},[e("i",{staticClass:"fa fa-shopping-cart"},[t._v(" ("+t._s(t.length)+")")])]),e("h1",[t._v("Mon Stock")]),e("hr"),t._l(t.bonLivraisonItems.results,(function(t){return e("StockItem",{key:t.id,staticClass:"stock__item",attrs:{product:t}})}))],2)},$t=[],St=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("div",{staticClass:"header"},[e("h5",{staticClass:"card-title"},[t._v(t._s(t.product.produit.materiel))])]),e("div",{staticClass:"card-body"},[e("center",[e("h6",{staticClass:"card-subtitle"},[t._v(t._s(t.product.produit.reference))]),e("hr"),e("p",{staticClass:"card-text"},[t._v(" Qte Recue:"+t._s(t.product.qte_livree)+" "+t._s(t.product.unite))]),e("hr"),e("p",{staticClass:"card-text"},[t._v(" Qte Restante:"+t._s(t.product.qte_restante)+" "+t._s(t.product.unite))]),e("hr"),e("p",{staticClass:"text-center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],staticClass:"form-control",attrs:{type:"float",placeholder:"Qty",min:"1"},domProps:{value:t.quantity},on:{input:function(e){e.target.composing||(t.quantity=e.target.value)}}})]),e("button",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return t.addToCart(t.product)}}},[t._v("Add To Cart ")])])],1)])},kt=[],qt={name:"StockItem",props:["product"],data(){return{quantity:1}},methods:{addToCart(){(isNaN(this.quantity)||this.quantity<1)&&(this.quantity=1);const t={product:this.product,quantity:this.quantity};this.$store.commit("AddToCart",t)},getIcon(t){return null==t.image?"/img/item.png":t.image},increaseQtt:function(){this.cart.add(this.item)},decreaseQtt:function(){this.cart.decrease(this.item.id)},enableEdition(){0!=this.item.quantite&&(this.editable=!0)}},computed:{qtt:{get(){return this.cart.getQuantite(this.item.id)},set(t){0!=t.length&&this.cart.add(this.item,t)}}}},Pt=qt,Dt=(0,m.Z)(Pt,St,kt,!1,null,"82d724c6",null),Nt=Dt.exports,Lt={components:{StockItem:Nt},name:"product",data(){return{carts:{items:[]},bonLivraisonItems:this.$store.state.bonLivraisonItems}},computed:{logged_in(){return null!=this.$store.state.user},length(){let t=0;for(let e=0;e<this.carts.items.length;e++)t+=parseFloat(this.carts.items[e].quantity);return t}},mounted(){this.carts=this.$store.state.carts,c().get(this.$store.state.url+"/bonLivraisonItems/",this.header).then((t=>{this.bonLivraisonItems=t.data,console.log(t.data)})).catch((t=>{console.error(t)}))}},Ot=Lt,It=(0,m.Z)(Ot,xt,$t,!1,null,"3ee006e0",null),Tt=It.exports,At={components:{domain:Tt},mounted(){document.title="All products | Gestion Labo"}},Ft=At,Bt=(0,m.Z)(Ft,Ct,wt,!1,null,null,null),Et=Bt.exports,Zt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-cart container"},[e("div",{staticClass:"columns is-multiline"},[t._m(0),e("div",{staticClass:"column is-12 box"},[t.cartTotalLength?e("table",{staticClass:"table is-fullwidth"},[t._m(1),e("tbody",t._l(t.cart.items,(function(s){return e("CartItem",{key:s.id,attrs:{initialItem:s},on:{removeFromCart:t.removeFromCart}})})),1)]):e("p",[t._v("You don't have any product in your cart...")])]),e("div",{staticClass:"container"},[e("h2",[t._v("Summary : "),e("strong",[t._v(" "+t._s(t.cartTotalLength))]),t._v(" items ")]),0!=t.cartTotalLength?e("center",[e("router-link",{staticClass:"btn btn-success",attrs:{to:"/cart/checkout"}},[t._v("Proceed to checkout")])],1):t._e()],1)])])},Ut=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"column is-12"},[e("h1",{staticClass:"title"},[t._v("Cart")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v("Product")]),e("th",[t._v("Reference")]),e("th",[t._v("Qtes en stock")]),e("th",[t._v("Qte commande")]),e("th",[t._v("Action")])])])}],jt=function(){var t=this,e=t._self._c;return e("tr",[e("th",[t._v(t._s(t.item.product.id))]),e("td",[e("router-link",{attrs:{to:t.item.product.get_absolute_url}},[t._v(t._s(t.item.product.materiel))])],1),e("th",[t._v(t._s(t.item.product.reference))]),e("th",[t._v(t._s(t.item.product.quantite)+" "+t._s(t.item.product.unite))]),e("td",[e("a",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return t.decrementQuantity(t.item)}}},[t._v("-")]),t._v("   "),e("a",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return t.incrementQuantity(t.item)}}},[t._v("+")]),t._v("   "+t._s(t.item.quantity)+t._s(t.item.product.unite)+" ")]),e("td",[e("button",{staticClass:"btn btn-danger btn-sm delete",on:{click:function(e){return t.removeFromCart(t.item)}}},[t._v("x")])])])},zt=[],Jt={name:"CartItem",props:{initialItem:Object},data(){return{item:this.initialItem}},methods:{getItemTotal(t){return t.quantity*t.product.price},decrementQuantity(t){t.quantity-=1,0===t.quantity&&this.$emit("removeFromCart",t),this.updateCart()},incrementQuantity(t){t.quantity+=1,this.updateCart()},updateCart(){localStorage.setItem("cart",JSON.stringify(this.$store.state.cart))},removeFromCart(t){this.updateCart(),this.$emit("removeFromCart",t)}}},Qt=Jt,Rt=(0,m.Z)(Qt,jt,zt,!1,null,"ced716bc",null),Mt=Rt.exports,Vt={name:"Cart",components:{CartItem:Mt},data(){return{cart:{items:[]}}},mounted(){this.cart=this.$store.state.cart},methods:{updateCart(){localStorage.setItem("cart",JSON.stringify(this.$store.state.cart))},removeFromCart(t){this.cart.items=this.cart.items.filter((e=>e.product.id!==t.product.id)),this.updateCart()}},computed:{cartTotalLength(){return this.cart.items.reduce(((t,e)=>t+parseFloat(e.quantity)),0)}}},Gt=Vt,Yt=(0,m.Z)(Gt,Zt,Ut,!1,null,"b45c8fba",null),Ht=Yt.exports,Wt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-cart container"},[e("div",{staticClass:"columns is-multiline"},[t._m(0),e("div",{staticClass:"column is-12 box"},[t.cartTotalLength?e("table",{staticClass:"table is-fullwidth"},[t._m(1),e("tbody",t._l(t.carts.items,(function(s){return e("CartItem",{key:s.id,attrs:{initialItems:s},on:{removeFromCart:t.removeFromCart}})})),1)]):e("p",[t._v("You don't have any product in your cart...")])]),e("div",{staticClass:"container"},[e("h2",[t._v("Summary : "),e("strong",[t._v(" "+t._s(t.cartTotalLength))]),t._v(" items ")]),0!=t.cartTotalLength?e("center",[e("router-link",{staticClass:"btn btn-success",attrs:{to:"/cart/checkorder"}},[t._v("Proceed to checkout")])],1):t._e()],1)])])},Kt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"column is-12"},[e("h1",{staticClass:"title"},[t._v("Stock Cart")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v("Product")]),e("th",[t._v("Reference")]),e("th",[t._v("Qtes en stock")]),e("th",[t._v("Qte commande")]),e("th",[t._v("Action")])])])}],Xt=function(){var t=this,e=t._self._c;return e("tr",[e("th",[t._v(t._s(t.item.product.id))]),e("th",[t._v(t._s(t.item.product.produit.materiel))]),e("th",[t._v(t._s(t.item.product.produit.reference))]),e("th",[t._v(t._s(t.item.product.qte_livree)+" "+t._s(t.item.product.unite))]),e("td",[e("a",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return t.decrementQuantity(t.item)}}},[t._v("-")]),t._v("   "),e("a",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return t.incrementQuantity(t.item)}}},[t._v("+")]),t._v("   "+t._s(t.item.quantity)+" "+t._s(t.item.product.unite)+" ")]),e("td",[e("button",{staticClass:"btn btn-danger btn-sm delete",on:{click:function(e){return t.removeFromCart(t.item)}}},[t._v("x")])])])},te=[],ee={name:"StockItem",props:{initialItems:Object},data(){return{item:this.initialItems}},methods:{getItemTotal(t){return t.quantity*t.product.price},decrementQuantity(t){t.quantity-=1,0===t.quantity&&this.$emit("removeFromCart",t),this.updateCart()},incrementQuantity(t){t.quantity+=1,this.updateCart()},updateCart(){localStorage.setItem("carts",JSON.stringify(this.$store.state.carts))},removeFromCart(t){this.updateCart(),this.$emit("removeFromCart",t)}}},se=ee,ae=(0,m.Z)(se,Xt,te,!1,null,"3c1d3ad3",null),ie=ae.exports,re={name:"Cart",components:{CartItem:ie},data(){return{carts:{items:[]}}},mounted(){this.carts=this.$store.state.carts},methods:{updateCart(){localStorage.setItem("carts",JSON.stringify(this.$store.state.carts))},removeFromCart(t){this.carts.items=this.cart.items.filter((e=>e.product.id!==t.product.id)),this.updateCart()}},computed:{cartTotalLength(){return this.carts.items.reduce(((t,e)=>t+parseFloat(e.quantity)),0)}}},oe=re,ne=(0,m.Z)(oe,Wt,Kt,!1,null,"edd03a88",null),le=ne.exports,ce=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"columns is-multiline"},[t._m(0),e("div",{staticClass:"column is-12"},[e("table",{staticClass:"table"},[t._m(1),e("tbody",t._l(t.cart.items,(function(s){return e("tr",{key:s.product.id},[e("td",[t._v(t._s(s.product.materiel))]),e("td",[t._v(t._s(s.product.reference))]),e("td",[t._v(t._s(s.quantity)+t._s(s.product.unite))])])})),0)])]),e("hr",{staticStyle:{"background-color":"red"}}),e("div",{staticClass:"column1 is-8"},[e("h2",{staticClass:"subtitle"},[t._v("Commande details")]),e("div",{staticClass:"columns is-multiline"},[e("div",{staticClass:"column is-6"},[e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_nom"}},[t._v("Numero de Commande")]),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.num_commande,expression:"num_commande"}],attrs:{type:"text"},domProps:{value:t.num_commande},on:{input:function(e){e.target.composing||(t.num_commande=e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_nom"}},[t._v("Nom du Laboratoire")]),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.laboratoire.name,expression:"laboratoire.name"}],attrs:{type:"text",list:"noms",id:"id_nom"},domProps:{value:t.laboratoire.name},on:{change:t.setId,input:function(e){e.target.composing||t.$set(t.laboratoire,"name",e.target.value)}}})]),e("datalist",{attrs:{id:"noms"}},t._l(t.laboratoires.results,(function(t){return e("option",{domProps:{value:t.name}})})),0)])]),t.errors.length?e("div",{staticClass:"notification is-danger mt-4"},t._l(t.errors,(function(s){return e("p",{key:s},[t._v(t._s(s))])})),0):t._e(),t.cartTotalLength?[e("br"),e("button",{staticClass:"btn btn-primary",on:{click:t.submitForm}},[t._v("Submit")])]:t._e(),e("hr")],2)])])},de=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"column is-12"},[e("h1",{staticClass:"title"},[t._v("Checkout")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Product")]),e("th",[t._v("Reference")]),e("th",[t._v("Quantity")])])])}],ue={name:"Checkout",data(){return{laboratoire:{name:""},num_commande:"",user:"",cart:{items:[]},errors:[]}},mounted(){document.title="Commande | Labo",this.cart=this.$store.state.cart,this.cartTotalLength,this.laboratoires.length<1&&c().get(this.$store.state.url+"/labo/",this.headers).then((t=>{this.$store.state.laboratoires=t.data})).catch((t=>{}))},methods:{setId(){for(let t of this.$store.state.laboratoires)if(t.id==this.laboratoire.id)return void(this.laboratoire.name=t.name)},setName(){for(let t of this.$store.state.laboratoires)if(t.name==this.laboratoire.name)return void(this.laboratoire.id=t.id)},submitForm(){const t=[];let e={};for(let s=0;s<this.cart.items.length;s++){const e=this.cart.items[s],a={product:e.product.id,quantity:e.quantity};t.push(a)}e={laboratoire:this.laboratoire,num_commande:this.num_commande,items:t},console.log(e),c().post(this.$store.state.url+"/commande/",e,this.headers).then((t=>{this.$store.commit("clearCart"),this.$router.push("/cart/success")})).catch((t=>{this.errors.push("Something went wrong. Please try again"),console.log(t)})),this.$store.commit("setIsLoading",!1)}},computed:{laboratoires(){return this.$store.state.laboratoires},host(){return this.$store.state.url},username(){return this.$store.state.user.username},headers(){return{headers:{Authorization:"Bearer "+this.$store.state.user.access}}},cartTotalPrice(){return this.cart.items.reduce(((t,e)=>t+e.product.price*e.quantity),0)},cartTotalLength(){return this.cart.items.reduce(((t,e)=>t+e.quantity),0)}}},me=ue,pe=(0,m.Z)(me,ce,de,!1,null,"75632856",null),he=pe.exports,ve=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"columns is-multiline"},[t._m(0),e("div",{staticClass:"column is-12"},[e("table",{staticClass:"table"},[t._m(1),e("tbody",t._l(t.carts.items,(function(s){return e("tr",{key:s.product.id},[e("td",[t._v(t._s(s.product.produit.materiel))]),e("td",[t._v(t._s(s.product.produit.reference))]),e("td",[t._v(t._s(s.quantity)+" "+t._s(s.product.unite))])])})),0)])]),e("hr",{staticStyle:{"background-color":"red"}}),e("div",{staticClass:"column1 is-8"},[e("h2",{staticClass:"subtitle"},[t._v("Order details")]),e("div",{staticClass:"columns is-multiline"},[e("div",{staticClass:"column is-6"},[e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_nom"}},[t._v("Numero")]),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.num_order,expression:"num_order"}],attrs:{type:"text"},domProps:{value:t.num_order},on:{input:function(e){e.target.composing||(t.num_order=e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_nom"}},[t._v("Description")]),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],attrs:{type:"text"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})])])]),t.errors.length?e("div",{staticClass:"notification is-danger mt-4"},t._l(t.errors,(function(s){return e("p",{key:s},[t._v(t._s(s))])})),0):t._e(),t.cartTotalLength?[e("br"),e("button",{staticClass:"btn btn-primary",on:{click:t.submitForm}},[t._v("Submit")])]:t._e(),e("hr")],2)])])},_e=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"column is-12"},[e("h1",{staticClass:"title"},[t._v("Checkout")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Product")]),e("th",[t._v("Reference")]),e("th",[t._v("Quantity")])])])}],fe={name:"Checkout",data(){return{num_order:"",description:"",user:"",carts:{items:[]},errors:[]}},mounted(){document.title="Commande | Labo",this.carts=this.$store.state.carts},methods:{submitForm(){const t=[];let e={};for(let s=0;s<this.carts.items.length;s++){const e=this.carts.items[s],a={product:e.product.id,quantity:e.quantity};t.push(a)}e={num_order:this.num_order,description:this.description,items:t},console.log(e),c().post(this.$store.state.url+"/order/",e,this.header).then((t=>{this.$store.commit("clear"),this.$router.push("/cart/success")})).catch((t=>{this.errors.push("Something went wrong. Please try again"),console.log(t)})),this.$store.commit("setIsLoading",!1)}},computed:{host(){return this.$store.state.url},username(){return this.$store.state.user.username},cartTotalPrice(){return this.carts.items.reduce(((t,e)=>t+e.product.price*e.quantity),0)},cartTotalLength(){return this.carts.items.reduce(((t,e)=>t+e.quantity),0)}}},ge=fe,be=(0,m.Z)(ge,ve,_e,!1,null,"489c8fca",null),ye=be.exports,Ce=function(){var t=this;t._self._c;return t._m(0)},we=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-success"},[e("div",{staticClass:"columns is-multiline"},[e("div",{staticClass:"column is-12 content"},[e("h1",{staticClass:"title"},[t._v("Thank You")]),e("p",[t._v("Your order will be processed!!"),e("br"),t._v("Welcome back ...")])])])])}],xe={name:"Success",mounted(){document.title="Success | Ecommerce Store"}},$e=xe,Se=(0,m.Z)($e,Ce,we,!1,null,"8ee37dc6",null),ke=Se.exports,qe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"parent"},[e("div",{staticClass:"form-inline my-2 my-lg-0 top",staticStyle:{"padding-top":"20px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search_term,expression:"search_term"}],staticClass:"form-control mr-sm-2",attrs:{type:"text",placeholder:"Search","aria-label":"Search"},domProps:{value:t.search_term},on:{input:function(e){e.target.composing||(t.search_term=e.target.value)}}})]),e("br"),e("div",{staticClass:"scrollable-tab"},[e("table",{staticClass:"table paiements"},[t._m(0),e("tbody",{attrs:{id:"paiements"}},t._l(t.items,(function(s,a){return e("tr",{key:s.id},[e("td",[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.user.user.first_name)+" "+t._s(s.user.user.last_name))]),e("td",[t._v(t._s(s.num_order))]),e("td",[t._v(t._s(t.datetime(s.created_at)))]),e("td",[t._v(t._s(s.status))]),e("td",[e("div",{staticClass:"btns"},[e("button",{on:{click:function(e){return e.preventDefault(),t.startEdit(s)}}},[t._v("Approuver")]),e("button",{on:{click:function(e){return e.preventDefault(),t.showDetails(s)}}},[t._v("Detail")])])])])})),0)])]),e("DetailsDialog",{attrs:{visible:t.details_opened,commande:t.active_commande},on:{close:function(e){t.details_opened=!1}}})],1)},Pe=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"panier-item"},[e("th",[t._v("#")]),e("th",[t._v("User")]),e("th",[t._v("Numero de Order")]),e("th",[t._v("Date ordered")]),e("th",[t._v("Status")]),e("th")])])}],De=function(){var t=this,e=t._self._c;return e("div",{class:{popup:!0,active:t.visible},on:{click:t.close}},[e("div",{staticClass:"popup-body",on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[e("center",[e("h2",[t._v("Order")])]),0==t.commandes.length?e("div",[t._v(t._s(t.action))]):e("div",{staticClass:"scrollable-tab"},[e("table",{staticClass:"table commandes"},[t._m(0),e("tbody",{attrs:{id:"commandes"}},t._l(t.commandes.results,(function(s,a){return e("tr",[e("td",{staticStyle:{color:"#aaa"}},[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.product.materiel))]),e("td",[t._v(t._s(s.quantity)+" "+t._s(s.product.unite))])])})),0)])])],1)])},Ne=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"panier-item"},[e("th",[t._v("id")]),e("th",[t._v("Produit")]),e("th",[t._v("Quantites")])])])}],Le={data(){return{commandes:[],action:"récuperation des commandes..."}},props:{visible:{type:Boolean,default:!1},commande:{type:Object,required:!0}},watch:{visible(t){if(this.visible){this.$store.state.user.access;c().get(this.$store.state.url+"/orderItem/?order="+this.commande.id,this.header).then((t=>{this.commandes=t.data,this.action="pas de details.",console.log(t.data)})).catch((t=>{console.error(t)}))}}},methods:{close(){this.$emit("close")}}},Oe=Le,Ie=(0,m.Z)(Oe,De,Ne,!1,null,"4338103b",null),Te=Ie.exports,Ae={components:{DetailsDialog:Te},data(){return{csvData:{},items:this.$store.state.commandes,active_item:{},details_opened:!1,active_commande:{},edit_mode:!1,achat_mode:!1,add_mode:!1,search_term:""}},watch:{"$store.state.commandes"(t){this.items=t},search_term(t){this.dosearch(t)}},methods:{dosearch(t){c().get(this.$store.state.url+`/order/?search=${this.search_term}`,this.header).then((t=>{this.$store.state.commandes=t.data})).catch((t=>{console.error(t)}))},fetchCommandes(){c().get(this.$store.state.url+"/order/",this.header).then((t=>{this.$store.state.commandes=t.data,this.items=t.data.results,console.log(t.data)})).catch((t=>{if("token_not_valid"==t.response.data.code){let t={refresh:this.$store.state.user.refresh};c().post(this.$store.state.url+"/refresh/",t).then((t=>{this.$store.state.user.access=t.data.access,this.fetchCommandes()})).catch((t=>{this.$store.state.user=null}))}}))},exitEdition(){this.active_item={},this.edit_mode=!1,this.achat_mode=!1,this.add_mode=!1},startEdit(t){this.active_item=t,this.edit_mode=!0},showDetails(t){this.active_commande=t,this.details_opened=!0},performFilter(t){let e=this.$store.state.products.filter((e=>e.id==t|e.nom.toLowerCase().includes(t.toLowerCase())));this.items=e},download(t){const e=new Blob([t],{type:"text/csv"}),s=window.URL.createObjectURL(e),a=document.createElement("a");a.setAttribute("hidden",""),a.setAttribute("href",s),a.setAttribute("download","model.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},generateCSV(){let t=this.items,e="id;produit;quantite;prix_achat;details\n";for(var s=0;s<t.length;s++)e+=t[s].id+";"+t[s].nom+"\n";console.log(e),this.download(e)},level(t){return 0==t?"empty":t<=5?"low":void 0},uploadCSV(t){if(t.target.files&&t.target.files[0]){let e=new FileReader;e.readAsBinaryString(t.target.files[0]),e.onload=t=>{console.log(t),this.csvData.size=t.total,this.csvData.fileData=t.target.result;let e=this.convertToJSON(this.csvData.fileData);console.log(e),console.table(e)}}},convertToJSON(t){let e=t.trim().split("\n"),s=[],a=e[0].split(";"),i=[],r={};e=e.slice(1);for(let o=0;o<e.length;o++){i=e[o].split(";");for(let t=0;t<i.length;t++)if(0===i.indexOf(i[t])||isNaN(i[t]))r[a[t]]=i[t];else{let e=Number.parseFloat(i[t]);r[a[t]]=e.toFixed(2)}s.push(r),r={}}return s}},mounted(){document.title="Commande |Labo",this.fetchCommandes()}},Fe=Ae,Be=(0,m.Z)(Fe,qe,Pe,!1,null,"0818b641",null),Ee=Be.exports,Ze=function(){var t=this,e=t._self._c;return e("div",{staticClass:"parent"},[e("h3",[t._v("Mes commandes")]),e("div",{staticClass:"form-inline my-2 my-lg-0 top",staticStyle:{float:"left","padding-left":"20px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search_term,expression:"search_term"}],staticClass:"form-control mr-sm-2",attrs:{type:"text",placeholder:"Search","aria-label":"Search"},domProps:{value:t.search_term},on:{input:function(e){e.target.composing||(t.search_term=e.target.value)}}})]),e("i",{staticClass:"fa fa-paper-plane btn desos",attrs:{"aria-hidden":"true"},on:{click:function(e){return e.preventDefault(),t.envoyer.apply(null,arguments)}}}),e("br"),e("div",{staticClass:"scrollable-tab",staticStyle:{"padding-top":"10px"}},[e("table",{staticClass:"table paiements"},[t._m(0),e("tbody",{attrs:{id:"paiements"}},t._l(t.items,(function(s,a){return e("tr",[e("td",[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.user.user.username))]),e("td",[t._v(t._s(s.laboratoire.name))]),e("td",[t._v(t._s(s.num_commande))]),e("td",[t._v(t._s(t.datetime(s.date_commande)))]),e("td",[t._v(t._s(s.status))]),e("td",[e("i",{staticClass:"fa fa-edit",staticStyle:{color:"blue","font-size":"24px","padding-right":"10px"},attrs:{"aria-hidden":"true"},on:{click:function(e){return e.preventDefault(),t.showDetails(s)}}}),e("i",{staticClass:"fa fa-trash",staticStyle:{color:"red","font-size":"24px"},attrs:{"aria-hidden":"true"},on:{click:function(e){return e.preventDefault(),t.Delete(s)}}})]),e("td",[e("div",{staticClass:"btns"},[e("button",{on:{click:function(e){return e.preventDefault(),t.showDetails(s)}}},[t._v("Detail")])])])])})),0)])]),e("DetailsDialog",{attrs:{visible:t.details_opened,commande:t.active_commande},on:{close:function(e){t.details_opened=!1}}})],1)},Ue=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"panier-item"},[e("th",[t._v("#")]),e("th",[t._v("User")]),e("th",[t._v("Laboratoire")]),e("th",[t._v("Numero de Commande")]),e("th",[t._v("Date commande")]),e("th",[t._v("Status")]),e("th",[t._v("Action")]),e("th")])])}],je=function(){var t=this,e=t._self._c;return e("div",{class:{popup:!0,active:t.visible},on:{click:t.close}},[e("div",{staticClass:"popup-body",on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[e("center",[e("h2",[t._v("Commande")])]),0==t.commandes.length?e("div",[t._v(t._s(t.action))]):e("div",{staticClass:"scrollable-tab"},[e("table",{staticClass:"table commandes"},[t._m(0),e("tbody",{attrs:{id:"commandes"}},t._l(t.commandes.results,(function(s,a){return e("tr",[e("td",{staticStyle:{color:"#aaa"}},[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.commande.num_commande))]),e("td",[t._v(t._s(s.product.materiel))]),e("td",[t._v(t._s(s.qte_commande)+" "+t._s(s.product.unite))])])})),0)])])],1)])},ze=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"panier-item"},[e("th",[t._v("id")]),e("th",[t._v("Commande")]),e("th",[t._v("Produit")]),e("th",[t._v("Quantites")])])])}],Je={data(){return{commandes:[],action:"récuperation des commandes..."}},props:{visible:{type:Boolean,default:!1},commande:{type:Object,required:!0}},watch:{visible(t){if(this.visible){this.$store.state.user.access;c().get(this.$store.state.url+"/commandeItem/?commande="+this.commande.id,this.header).then((t=>{this.commandes=t.data,this.action="pas de details.",console.log(t.data)})).catch((t=>{console.error(t)}))}}},methods:{close(){this.$emit("close")}}},Qe=Je,Re=(0,m.Z)(Qe,je,ze,!1,null,"f91f8062",null),Me=Re.exports,Ve={components:{DetailsDialog:Me},data(){return{csvData:{},items:this.$store.state.commandes,active_item:{},commandes:this.$store.state.commandes,details_opened:!1,active_commande:{},edit_mode:!1,achat_mode:!1,add_mode:!1,search_term:""}},watch:{"$store.state.commandes"(t){this.items=t},search_term(t){this.dosearch(t)}},methods:{envoyer(){},Delete(t){confirm("Delete "+t.id)&&c()["delete"](this.$store.state.url+`/commande/${t.id}/`,this.header).then((t=>(this.fetchCommandes(),t)))},dosearch(t){c().get(this.$store.state.url+`/commande/?search=${this.search_term}`,this.header).then((t=>{this.$store.state.commandes=t.data})).catch((t=>{console.error(t)}))},fetchCommandes(){c().get(this.$store.state.url+"/commande/",this.header).then((t=>{this.$store.state.commandes=t.data,this.items=t.data.results})).catch((t=>{if("token_not_valid"==t.response.data.code){let t={refresh:this.$store.state.user.refresh};c().post(this.$store.state.url+"/refresh/",t).then((t=>{this.$store.state.user.access=t.data.access,this.fetchCommandes()})).catch((t=>{}))}}))},exitEdition(){this.active_item={},this.edit_mode=!1,this.achat_mode=!1,this.add_mode=!1},showDetails(t){this.active_commande=t,this.details_opened=!0},startEdit(t){this.active_item=t,this.edit_mode=!0},startAchat(t){this.active_item=t,this.achat_mode=!0},performFilter(t){let e=this.$store.state.products.filter((e=>e.id==t|e.nom.toLowerCase().includes(t.toLowerCase())));this.items=e},download(t){const e=new Blob([t],{type:"text/csv"}),s=window.URL.createObjectURL(e),a=document.createElement("a");a.setAttribute("hidden",""),a.setAttribute("href",s),a.setAttribute("download","model.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},generateCSV(){let t=this.items,e="id;produit;quantite;prix_achat;details\n";for(var s=0;s<t.length;s++)e+=t[s].id+";"+t[s].nom+"\n";console.log(e),this.download(e)},level(t){return 0==t?"empty":t<=5?"low":void 0},uploadCSV(t){if(t.target.files&&t.target.files[0]){let e=new FileReader;e.readAsBinaryString(t.target.files[0]),e.onload=t=>{console.log(t),this.csvData.size=t.total,this.csvData.fileData=t.target.result;let e=this.convertToJSON(this.csvData.fileData);console.log(e),console.table(e)}}},convertToJSON(t){let e=t.trim().split("\n"),s=[],a=e[0].split(";"),i=[],r={};e=e.slice(1);for(let o=0;o<e.length;o++){i=e[o].split(";");for(let t=0;t<i.length;t++)if(0===i.indexOf(i[t])||isNaN(i[t]))r[a[t]]=i[t];else{let e=Number.parseFloat(i[t]);r[a[t]]=e.toFixed(2)}s.push(r),r={}}return s}},mounted(){document.title="Commande |Labo",this.fetchCommandes()}},Ge=Ve,Ye=(0,m.Z)(Ge,Ze,Ue,!1,null,"0a95e6c9",null),He=Ye.exports,We=function(){var t=this,e=t._self._c;return e("div",{staticClass:"parent"},[e("div",{staticClass:"form-inline my-2 my-lg-0 top",staticStyle:{"padding-top":"20px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search_term,expression:"search_term"}],staticClass:"form-control mr-sm-2",attrs:{type:"text",placeholder:"Search","aria-label":"Search"},domProps:{value:t.search_term},on:{input:function(e){e.target.composing||(t.search_term=e.target.value)}}})]),e("br"),0==t.items?e("div",[e("p",{staticClass:"vide"},[t._v("Pas de bon de commande effectue ...")])]):e("div",{staticClass:"scrollable-tab"},[e("table",{staticClass:"table paiements"},[t._m(0),e("tbody",{attrs:{id:"paiements"}},t._l(t.items,(function(s,a){return e("tr",[e("td",[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.user.user.username))]),e("td",[t._v(t._s(s.laboratoire.name))]),e("td",[t._v(t._s(s.num_bon))]),e("td",[t._v(t._s(t.datetime(s.date_livraison)))]),e("td",[t._v(t._s(s.status))]),e("td",[e("div",{staticClass:"btns"},[e("button",{on:{click:function(e){return e.preventDefault(),t.showDetails(s)}}},[t._v("Detail")])])])])})),0)])]),e("DetailsDialog",{attrs:{visible:t.details_opened,commande:t.active_commande},on:{close:function(e){t.details_opened=!1}}})],1)},Ke=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"panier-item"},[e("th",[t._v("#")]),e("th",[t._v("User")]),e("th",[t._v("Laboratoire")]),e("th",[t._v("Numero de bon")]),e("th",[t._v("Date commande")]),e("th",[t._v("Status")]),e("th")])])}],Xe=function(){var t=this,e=t._self._c;return e("div",{class:{popup:!0,active:t.visible},on:{click:t.close}},[e("div",{staticClass:"popup-body",on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[e("center",[e("h2",[t._v("Bon de Commande")])]),0==t.commandes.length?e("div",[t._v(t._s(t.action))]):e("div",{staticClass:"scrollable-tab"},[e("table",{staticClass:"table commandes"},[t._m(0),e("tbody",{attrs:{id:"commandes"}},t._l(t.commandes.results,(function(s,a){return e("tr",[e("td",{staticStyle:{color:"#aaa"}},[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.bonLivraison.commande.num_commande))]),e("td",[t._v(t._s(s.bonLivraison.num_bon))]),e("td",[t._v(t._s(s.produit.materiel))]),e("td",[t._v(t._s(s.qte_livree)+" "+t._s(s.produit.unite))]),e("td",[t._v(t._s(s.qte_restante)+" "+t._s(s.produit.unite))])])})),0)])])],1)])},ts=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"panier-item"},[e("th",[t._v("#")]),e("th",[t._v("Commande")]),e("th",[t._v("Bon Livraison")]),e("th",[t._v("Produit")]),e("th",[t._v("Quantites Livrees")]),e("th",[t._v("Quantites Restante")])])])}],es={data(){return{commandes:[],action:"récuperation des commandes..."}},props:{visible:{type:Boolean,default:!1},commande:{type:Object,required:!0}},watch:{visible(t){if(this.visible){this.$store.state.user.access;c().get(this.$store.state.url+"/bonLivraisonItems/?bonLivraison="+this.commande.id,this.header).then((t=>{this.commandes=t.data,this.action="pas de details.",console.log(t.data)})).catch((t=>{console.error(t)}))}}},methods:{close(){this.$emit("close")}}},ss=es,as=(0,m.Z)(ss,Xe,ts,!1,null,"6575467e",null),is=as.exports,rs={components:{DetailsDialog:is},data(){return{csvData:{},items:this.$store.state.commandes,active_item:{},details_opened:!1,active_commande:{},edit_mode:!1,achat_mode:!1,add_mode:!1,search_term:""}},watch:{"$store.state.commandes"(t){this.items=t},search_term(t){this.dosearch(t)}},methods:{dosearch(t){c().get(this.$store.state.url+`/bonLivraison/?search=${this.search_term}`,this.header).then((t=>{this.$store.state.commandes=t.data})).catch((t=>{console.error(t)}))},fetchCommandes(){c().get(this.$store.state.url+"/bonLivraison/",this.header).then((t=>{this.$store.state.commandes=t.data,this.items=t.data.results})).catch((t=>{this.$store.state.user=null}))},exitEdition(){this.active_item={},this.edit_mode=!1,this.achat_mode=!1,this.add_mode=!1},showDetails(t){this.active_commande=t,this.details_opened=!0},startEdit(t){this.active_item=t,this.edit_mode=!0},startAchat(t){this.active_item=t,this.achat_mode=!0},performFilter(t){let e=this.$store.state.products.filter((e=>e.id==t|e.nom.toLowerCase().includes(t.toLowerCase())));this.items=e},download(t){const e=new Blob([t],{type:"text/csv"}),s=window.URL.createObjectURL(e),a=document.createElement("a");a.setAttribute("hidden",""),a.setAttribute("href",s),a.setAttribute("download","model.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},generateCSV(){let t=this.items,e="id;produit;quantite;prix_achat;details\n";for(var s=0;s<t.length;s++)e+=t[s].id+";"+t[s].nom+"\n";console.log(e),this.download(e)},level(t){return 0==t?"empty":t<=5?"low":void 0},uploadCSV(t){if(t.target.files&&t.target.files[0]){let e=new FileReader;e.readAsBinaryString(t.target.files[0]),e.onload=t=>{console.log(t),this.csvData.size=t.total,this.csvData.fileData=t.target.result;let e=this.convertToJSON(this.csvData.fileData);console.log(e),console.table(e)}}},convertToJSON(t){let e=t.trim().split("\n"),s=[],a=e[0].split(";"),i=[],r={};e=e.slice(1);for(let o=0;o<e.length;o++){i=e[o].split(";");for(let t=0;t<i.length;t++)if(0===i.indexOf(i[t])||isNaN(i[t]))r[a[t]]=i[t];else{let e=Number.parseFloat(i[t]);r[a[t]]=e.toFixed(2)}s.push(r),r={}}return s}},mounted(){document.title="Commande |Labo",this.fetchCommandes()}},os=rs,ns=(0,m.Z)(os,We,Ke,!1,null,"761267e6",null),ls=ns.exports,cs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"parent",on:{click:function(e){t.popover_opened=!1}}},[e("div",{staticClass:"top"},[e("SearchBar",{attrs:{show_date:!1},on:{searched:t.searchItem}})],1),e("div",{staticClass:"recycler"}),e("div",{staticClass:"scrollable-tab"},[e("table",{staticClass:"table users"},[t._m(0),e("tbody",{attrs:{id:"users"}},t._l(t.users.results,(function(s,a){return e("tr",[e("td",[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.username))]),e("td",[t._v(t._s(s.first_name))]),e("td",[t._v(t._s(s.last_name))]),e("td",[t._v(t._s(s.is_active))]),e("td",{staticClass:"groups"},t._l(s.groups,(function(s){return e("span",[t._v(" "+t._s(s)),e("span",{staticClass:"comma"},[t._v(",")])])})),0),e("td",[e("div",{staticClass:"btns"},[t.permited(s)?e("button",{on:{click:function(e){return t.editUser(s)}}},[t._v(" editer ")]):t._e(),t.$store.state.user.groups.includes("admin")?e("span",[s.is_active?e("button",{on:{click:function(e){return t.deactivateUser(s)}}},[t._v("desactiver")]):e("button",{on:{click:function(e){return t.activateUser(s)}}},[t._v("activer")])]):t._e()])])])})),0)])]),e("EditUser",{attrs:{visible:t.edit_mode,item:t.active_user},on:{close:t.exitEdition}})],1)},ds=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"panier-item"},[e("th",[t._v("#")]),e("th",[t._v("username")]),e("th",[t._v("prenom")]),e("th",[t._v("nom")]),e("th",[t._v("actif")]),e("th",[t._v("groupes")]),e("th",[t._v("options")])])])}],us=function(){var t=this,e=t._self._c;return e("div",{class:{popup:!0,active:t.visible},on:{click:t.close}},[e("div",{staticClass:"popup-body",on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[t._m(0),e("form",{attrs:{method:"post"}},[e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_username"}},[t._v("Username:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_user.username,expression:"new_user.username"}],attrs:{type:"text",id:"id_username"},domProps:{value:t.new_user.username},on:{input:function(e){e.target.composing||t.$set(t.new_user,"username",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_first_name"}},[t._v("Prenom:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_user.first_name,expression:"new_user.first_name"}],attrs:{type:"text",id:"id_first_name"},domProps:{value:t.new_user.first_name},on:{input:function(e){e.target.composing||t.$set(t.new_user,"first_name",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_last_name"}},[t._v("Nom:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_user.last_name,expression:"new_user.last_name"}],attrs:{type:"text",id:"id_last_name"},domProps:{value:t.new_user.last_name},on:{input:function(e){e.target.composing||t.$set(t.new_user,"last_name",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_first_name"}},[t._v(" Mot de passe: ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_user.password,expression:"new_user.password"}],attrs:{type:"password",id:"id_psswd"},domProps:{value:t.new_user.password},on:{input:function(e){e.target.composing||t.$set(t.new_user,"password",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"confirm"}},[t._v(" confirmation: ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.confirm,expression:"confirm"}],attrs:{type:"password",id:"confirm"},domProps:{value:t.confirm},on:{input:function(e){e.target.composing||(t.confirm=e.target.value)}}})]),t.is_admin?e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_group"}},[t._v("Groupe:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.group,expression:"group"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.group=e.target.multiple?s:s[0]}}},t._l(t.groups,(function(s){return e("option",{domProps:{selected:t.user.groups.includes(s),value:s}},[t._v(" "+t._s(s)+" ")])})),0)]):t._e(),e("div",{staticClass:"buttons"},[e("div",{staticClass:"logs"},[t._v(t._s(t.logs))]),e("input",{attrs:{type:"submit",value:"Modifier"},on:{click:t.changerUser}})])])])])},ms=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"head"},[e("h3",{staticStyle:{color:"#007bff"}},[t._v("Modifier Utilisateur")]),e("hr")])}],ps={props:{visible:{type:Boolean,default:!1},item:{type:Object,required:!0}},data(){return{logs:"",new_user:{},group:"",groups:["admin","gerant","caissier"],confirm:""}},computed:{is_admin(){return this.$store.state.user.is_admin}},watch:{item(t){this.new_user=JSON.parse(JSON.stringify(t))}},methods:{close(){this.$emit("close")},changerUser(){let t={username:this.new_user.username,first_name:this.new_user.first_name,last_name:this.new_user.last_name};if(this.group&&(t["group"]=this.group),this.new_user.password){if(this.new_user.password!=this.confirm)return void(this.logs="les mot de passes doivent être identiques");if(this.new_user.password.length<6)return void(this.logs="le mot de passe doit avoir au moins 6 caractères");t["password"]=this.new_user.password}let e={headers:{Authorization:"Bearer "+this.$store.state.user.access}};c().put(this.$store.state.url+`/user/${this.item.id}/`,t,e).then((t=>{Object.assign(this.item,t.data),this.$emit("close")})).catch((t=>{console.error(t)}))}}},hs=ps,vs=(0,m.Z)(hs,us,ms,!1,null,"759885de",null),_s=vs.exports,fs={components:{SearchBar:K,EditUser:_s},data(){return{query_date:!1,edit_mode:!1,users:this.$store.state.users,details_opened:!1,active_user:{groups:[]}}},mounted(){this.searchItem(),this.fetchData(),document.title="All users | Gestion Labo"},methods:{editable(t){return this.$store.state.user.is_admin&&t.id!=this.$store.state.user.id},permited(t){return this.$store.state.user.is_admin||this.$store.state.user.id==t.id},searchItem(t){let e={};if(""==t)return this.fetchData();e=this.query_date||""==t?this.users.filter((e=>e.id==t|e.client.toLowerCase().includes(t.toLowerCase()))):this.$store.state.users.filter((e=>e.id==t|e.client.toLowerCase().includes(t.toLowerCase()))),this.users=e},fetchData(){let t={headers:{Authorization:"Bearer "+this.$store.state.user.access}};0==this.$store.state.users.length&&c().get(this.$store.state.url+"/user/",t).then((t=>{this.$store.state.users=t.data,this.users=t.data,console.log(t.data)})).catch((t=>{t.response||console.error(t)}))},headers(){return{headers:{Authorization:"Bearer "+this.$store.state.user.access}}},deactivateUser(t){confirm("voulez-vous vraiment arreter cette utilisateur?")&&c().put(this.$store.state.url+`/user/${t.id}/`,{is_active:!1},this.headers()).then((e=>{Object.assign(t,e.data)})).catch((t=>{console.error(t)}))},activateUser(t){confirm("voulez-vous mettre cette utilisateur en action?")&&c().put(this.$store.state.url+`/user/${t.id}/`,{is_active:!0},this.headers()).then((e=>{Object.assign(t,e.data)})).catch((t=>{console.error(t)}))},exitEdition(t){this.edit_mode=!1},editUser(t){this.edit_mode=!0,this.active_user=t}}},gs=fs,bs=(0,m.Z)(gs,cs,ds,!1,null,"68ff3a97",null),ys=bs.exports;a.ZP.use(O.ZP);const Cs=[{path:"/",name:"",component:Q},{path:"/home",name:"home",component:Q},{path:"/domain/:id/category/",name:"category",component:()=>s.e(373).then(s.bind(s,373)),props:!0},{path:"/category/:id/products/",name:"product",component:()=>s.e(30).then(s.bind(s,30)),props:!0},{path:"/stock",name:"stockcentral",component:yt},{path:"/stock-labo",name:"stock",component:Et},{path:"/orders",name:"Orders",component:Ee},{path:"/command",name:"commande",component:He},{path:"/bon-commande",name:"BonCommande",component:ls},{path:"/cart/checkout",name:"Checkout",component:he},{path:"/cart/checkorder",name:"checkorder",component:ye},{path:"/cart/success",name:"Success",component:ke},{path:"/cart-order",name:"CartOrder",component:le},{path:"/cart",name:"Cart",component:Ht},{path:"/users",name:"users",component:ys}],ws=new O.ZP({mode:"history",base:"/",routes:Cs});var xs=ws,$s=s(629);a.ZP.use($s.ZP);var Ss=new $s.ZP.Store({state:{user:null,url:"/api",users:[],domains:[],categories:[],laboratoires:[],products:[],orders:[],orderitems:[],bonLivraisonItems:[],bonLivraisons:[],cart:{items:[]},carts:{items:[]}},mutations:{initiallizeStore(t){localStorage.getItem("cart")?t.cart=JSON.parse(localStorage.getItem("cart")):localStorage.setItem("cart",JSON.stringify(t.cart)),localStorage.getItem("token")?(t.token=localStorage.getItem("token"),t.isAuthenticated=!0):(t.token="",t.isAuthenticated=!1)},addToCart(t,e){const s=t.cart.items.filter((t=>t.product.id===e.product.id));s.length?s[0].quantity=parseFloat(s[0].quantity)+parseFloat(e.quantity):t.cart.items.push(e),localStorage.setItem("cart",JSON.stringify(t.cart))},AddToCart(t,e){const s=t.carts.items.filter((t=>t.product.id===e.product.id));s.length?s[0].quantity=parseFloat(s[0].quantity)+parseFloat(e.quantity):t.carts.items.push(e),localStorage.setItem("carts",JSON.stringify(t.carts))},setIsLoading(t,e){t.isLoading=e},clearCart(t){t.cart={items:[]},localStorage.setItem("cart",JSON.stringify(t.cart))},clear(t){t.carts={items:[]},localStorage.setItem("carts",JSON.stringify(t.carts))}}}),ks=s(636),qs=s(810),Ps=s(417);ks.vI.add(Ps.mRB),a.ZP.component("fas-icon",qs.GN),ks.vI.add(Ps.sq$,Ps.IA$,Ps.FVb,Ps.koM,Ps.IwR,Ps.I7k,Ps.LEp,Ps.oFW,Ps.oTz,Ps.q7m,Ps.cf$),a.ZP.component("fa",qs.GN),a.ZP.mixin({computed:{header(){return{headers:{Authorization:`Bearer ${this.$store.state.user.access}`}}}},methods:{money(t){return void 0==t||null==t?"-":t.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},datetime(t){if(!t)return"-";let e=new Date(t);return new Intl.DateTimeFormat("en-GB",{dateStyle:"short",timeStyle:"short"}).format(e)},userIs(t){return this.user.groups.includes(t)}}}),a.ZP.config.productionTip=!1,new a.ZP({router:xs,store:Ss,render:t=>t(L)}).$mount("#app")},285:function(t,e,s){t.exports=s.p+"img/download.c604d594.jpeg"}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var r=e[a]={exports:{}};return t[a].call(r.exports,r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,a,i,r){if(!a){var o=1/0;for(d=0;d<t.length;d++){a=t[d][0],i=t[d][1],r=t[d][2];for(var n=!0,l=0;l<a.length;l++)(!1&r||o>=r)&&Object.keys(s.O).every((function(t){return s.O[t](a[l])}))?a.splice(l--,1):(n=!1,r<o&&(o=r));if(n){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[a,i,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.f={},s.e=function(t){return Promise.all(Object.keys(s.f).reduce((function(e,a){return s.f[a](t,e),e}),[]))}}(),function(){s.u=function(t){return"js/"+t+"."+{30:"d8ba45e3",373:"5b63a2a3"}[t]+".js"}}(),function(){s.miniCssF=function(t){return"css/"+t+"."+{30:"a246c3fc",373:"57d6b566"}[t]+".css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="gestionlabui:";s.l=function(a,i,r,o){if(t[a])t[a].push(i);else{var n,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==e+r){n=u;break}}n||(l=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,s.nc&&n.setAttribute("nonce",s.nc),n.setAttribute("data-webpack",e+r),n.src=a),t[a]=[i];var m=function(e,s){n.onerror=n.onload=null,clearTimeout(p);var i=t[a];if(delete t[a],n.parentNode&&n.parentNode.removeChild(n),i&&i.forEach((function(t){return t(s)})),e)return e(s)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=m.bind(null,n.onerror),n.onload=m.bind(null,n.onload),l&&document.head.appendChild(n)}}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var t=function(t,e,s,a){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var r=function(r){if(i.onerror=i.onload=null,"load"===r.type)s();else{var o=r&&("load"===r.type?"missing":r.type),n=r&&r.target&&r.target.href||e,l=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=n,i.parentNode.removeChild(i),a(l)}};return i.onerror=i.onload=r,i.href=e,document.head.appendChild(i),i},e=function(t,e){for(var s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var i=s[a],r=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(r===t||r===e))return i}var o=document.getElementsByTagName("style");for(a=0;a<o.length;a++){i=o[a],r=i.getAttribute("data-href");if(r===t||r===e)return i}},a=function(a){return new Promise((function(i,r){var o=s.miniCssF(a),n=s.p+o;if(e(o,n))return i();t(a,n,i,r)}))},i={143:0};s.f.miniCss=function(t,e){var s={30:1,373:1};i[t]?e.push(i[t]):0!==i[t]&&s[t]&&e.push(i[t]=a(t).then((function(){i[t]=0}),(function(e){throw delete i[t],e})))}}(),function(){var t={143:0};s.f.j=function(e,a){var i=s.o(t,e)?t[e]:void 0;if(0!==i)if(i)a.push(i[2]);else{var r=new Promise((function(s,a){i=t[e]=[s,a]}));a.push(i[2]=r);var o=s.p+s.u(e),n=new Error,l=function(a){if(s.o(t,e)&&(i=t[e],0!==i&&(t[e]=void 0),i)){var r=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;n.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",n.name="ChunkLoadError",n.type=r,n.request=o,i[1](n)}};s.l(o,l,"chunk-"+e,e)}},s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,r,o=a[0],n=a[1],l=a[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(i in n)s.o(n,i)&&(s.m[i]=n[i]);if(l)var d=l(s)}for(e&&e(a);c<o.length;c++)r=o[c],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(d)},a=self["webpackChunkgestionlabui"]=self["webpackChunkgestionlabui"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(834)}));a=s.O(a)})();
//# sourceMappingURL=app.1eebe5fa.js.map