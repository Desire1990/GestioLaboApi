(function(){"use strict";var t={812:function(t,e,s){var a=s(144),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("meta",{attrs:{name:"viewport",content:"width=device-width, initial-scale=1.0"}}),t.logged_in?e("div",{staticClass:"main"},[e("TheTopbar",{on:{togglenav:function(e){t.navOpen=!t.navOpen}}}),e("TheSidebar",{attrs:{open:t.navOpen}}),e("router-view")],1):e("div",[e("Login")],1)])},r=[],o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[e("div",{staticClass:"content"},[e("header",{staticStyle:{"background-color":"#11101d"}},[e("h2",{staticClass:"heading",attrs:{id:"dashboard"}},[t._v(" Gestion Laboratoire ")]),t._m(0),e("router-link",{staticClass:"button is-success",attrs:{to:"/cart"}},[e("div",{staticClass:"user-wrapper"},[e("div",[e("a",{staticClass:"fa-solid fa-cart-shopping"})]),0!=t.cartTotalLength?e("div",[e("i",{staticClass:"fa fa-shopping-cart",staticStyle:{"font-size":"36px"},attrs:{"aria-hidden":"true"}},[t._v("("+t._s(t.cartTotalLength)+")")])]):t._e()])]),e("router-link",{staticClass:"button is-primary",attrs:{to:"/bon"}},[e("div",{staticClass:"user-wrapper"},[e("div",[e("a",{staticClass:"fa-solid fa-cart-shopping"})]),0!=t.cartTotalLengthbon?e("div",[e("i",{staticClass:"fa fa-shopping-cart",staticStyle:{"font-size":"36px"}},[t._v("("+t._s(t.cartTotalLengthbon)+")")])]):t._e()])]),e("div",{staticClass:"user-wrapper",on:{click:t.loggout}},[t._m(1)])],1)])])},n=[function(){var t=this,e=t._self._c;return e("label",{attrs:{for:"nav-toggle"}},[e("span",{staticClass:"fas fa-bars"})])},function(){var t=this,e=t._self._c;return e("div",[e("a",{staticClass:"bx bx-log-out-circle desos",staticStyle:{"font-size":"36px",color:"red"}})])}],c=s(669),l=s.n(c),d={data(){return{cart:{items:[]},cartbon:{items:[]}}},beforeCreate(){this.$store.commit("initiallizeStore");const t=this.$store.state.token;l().defaults.headers.common.Authorization=t?"Token "+t:""},mounted(){this.cart=this.$store.state.cart,this.cartbon=this.$store.state.cartbon;var t=JSON.parse(localStorage.getItem("user"));t?this.$store.state.user=t:console.warn("il y'a pas de session")},watch:{"$store.state.user":{deep:!0,handler(t){localStorage.setItem("user",JSON.stringify(t))}}},computed:{logged_in(){return null!=this.$store.state.user},cartTotalLength(){let t=0;for(let e=0;e<this.cart.items.length;e++)t+=parseFloat(this.cart.items[e].quantity);return t},cartTotalLengthbon(){let t=0;for(let e=0;e<this.cartbon.items.length;e++)t+=parseFloat(this.cartbon.items[e].quantity);return t}},methods:{loggout(){if(confirm("Are you sure you wanna logout?")){this.$store.state.user=null;const t=this.$route.query.to||"/";this.$router.push(t),toast({message:" Welcome back!!! logged out successfully!",type:"is-success",dismissible:!0,duration:2e3,position:"center"}),this.$router.push("/")}}}},u=d,m=s(1),h=(0,m.Z)(u,o,n,!1,null,"4a81390b",null),p=h.exports,v=function(){var t=this,e=t._self._c;return e("div",{staticClass:"sidebar",class:t.isOpened?"open":"",style:t.cssVars},[e("div",{staticClass:"logo-details",staticStyle:{margin:"6px 14px 0 14px"}},[t.menuLogo?e("img",{staticClass:"menu-logo icon",attrs:{src:t.menuLogo,alt:"menu-logo"}}):e("i",{staticClass:"bx icon",class:t.menuIcon}),e("div",{staticClass:"logo_name"},[t._v(" "+t._s(t.menuTitle)+" ")]),e("i",{staticClass:"bx",class:t.isOpened?"bx-menu-alt-right":"bx-menu",attrs:{id:"btn"},on:{click:function(e){t.isOpened=!t.isOpened}}})]),e("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"space-between","flex-grow":"1","max-height":"calc(100% - 60px)"}},[e("div",{staticStyle:{margin:"6px 14px 0 14px"},attrs:{id:"my-scroll"}},[e("ul",{staticClass:"nav-list",staticStyle:{overflow:"visible"}},t._l(t.menuItems,(function(s,a){return e("span",{key:a},[t.has_permission(s)?e("li",[e("router-link",{attrs:{to:s.link}},[e("i",{staticClass:"bx",class:s.icon||"bx-square-rounded"}),e("span",{staticClass:"links_name"},[t._v(t._s(s.name))]),e("span",{staticClass:"tooltip"},[t._v(t._s(s.tooltip||s.name))])])],1):t._e()])})),0)]),t.isLoggedIn?e("div",{staticClass:"profile"},[e("div",{staticClass:"profile-details"},[t.profileImg?e("img",{attrs:{src:t.profileImg,alt:"profileImg"}}):e("i",{staticClass:"bx bxs-user-rectangle"}),e("div",{staticClass:"name_job"},[e("div",{staticClass:"name"},[e("h3",[t._v(t._s(this.user.username))])])])]),t.isExitButton?e("i",{staticClass:"bx bx-log-out-circle",attrs:{id:"log_out"},on:{click:function(e){return e.stopPropagation(),t.loggout.apply(null,arguments)}}}):t._e()]):t._e()])])},_=[],f={name:"SidebarMenuAkahon",props:{
//! Menu settings
isMenuOpen:{type:Boolean,default:!0},menuTitle:{type:String,default:"Gestion Labo"},menuLogo:{type:String,default:"https://upload.wikimedia.org/wikipedia/en/e/e0/Emblem_of_the_University_of_Burundi.gif"},menuIcon:{type:String,default:"bxl-c-plus-plus"},isPaddingLeft:{type:Boolean,default:!0},menuOpenedPaddingLeftBody:{type:String,default:"250px"},menuClosedPaddingLeftBody:{type:String,default:"78px"},
//! Menu items
menuItems:{type:Array,default:()=>[{link:"/",name:"Dashboard",tooltip:"Dashboard",icon:"bx-grid-alt"},{link:"/users",name:"Users",tooltip:"User",icon:"bx-user",user:"admin"},{link:"/stock",name:"Stock Centrale",tooltip:"Messages",icon:"bx-store",user:"admin"},{link:"/stock-labo",name:"Stock",tooltip:"Messages",icon:"bx-store-alt"},{link:"/statistic",name:"Analytics",tooltip:"Analytics",icon:"bx-pie-chart-alt-2"},{link:"/orders",name:"Orders",tooltip:"Order",icon:"bx-cart-alt"},{link:"/command",name:"Commande",tooltip:"commande",icon:"bx-command"},{link:"/bon-commande",name:"Bon commande",tooltip:"Setting",icon:"bx-command"}]},
//! Search
isSearch:{type:Boolean,default:!0},searchPlaceholder:{type:String,default:"Search..."},searchTooltip:{type:String,default:"Search"},
//! Profile detailes
profileImg:{type:String,default:"https://upload.wikimedia.org/wikipedia/en/e/e0/Emblem_of_the_University_of_Burundi.gif"},profileName:{type:String,default:"Gestion"},profileRole:{type:String,default:"Labo UB"},isExitButton:{type:Boolean,default:!0},isLoggedIn:{type:Boolean,default:!0},
//! Styles
bgColor:{type:String,default:"#11101d"},secondaryColor:{type:String,default:"#1d1b31"},homeSectionColor:{type:String,default:"#e4e9f7"},logoTitleColor:{type:String,default:"#fff"},iconsColor:{type:String,default:"#fff"},itemsTooltipColor:{type:String,default:"#e4e9f7"},searchInputTextColor:{type:String,default:"#fff"},menuItemsHoverColor:{type:String,default:"#fff"},menuItemsTextColor:{type:String,default:"#fff"},menuFooterTextColor:{type:String,default:"#fff"}},data(){return{isOpened:!1,user:this.$store.state.user}},mounted(){this.isOpened=this.isMenuOpen},computed:{cssVars(){return{"--bg-color":this.bgColor,"--secondary-color":this.secondaryColor,"--home-section-color":this.homeSectionColor,"--logo-title-color":this.logoTitleColor,"--icons-color":this.iconsColor,"--items-tooltip-color":this.itemsTooltipColor,"--serach-input-text-color":this.searchInputTextColor,"--menu-items-hover-color":this.menuItemsHoverColor,"--menu-items-text-color":this.menuItemsTextColor,"--menu-footer-text-color":this.menuFooterTextColor}}},watch:{isOpened(){window.document.body.style.paddingLeft=this.isOpened&&this.isPaddingLeft?this.menuOpenedPaddingLeftBody:this.menuClosedPaddingLeftBody}},mounted(){var t=JSON.parse(localStorage.getItem("user"));t?this.$store.state.user=t:console.warn("il y'a pas de session")},methods:{has_permission(t){return!t.user||!!this.$store.state.user.groups.includes(t.user)},loggout(){confirm("Are you sure you wanna logout?")&&(this.$store.state.user=null)}}},g=f,b=(0,m.Z)(g,v,_,!1,null,"293c52f6",null),C=b.exports,y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"centered"},[e("div",{staticClass:"vertical-center"},[e("div",{staticClass:"inner-block"},[e("form",{staticClass:"login"},[e("center",[e("img",{attrs:{src:"https://upload.wikimedia.org/wikipedia/en/e/e0/Emblem_of_the_University_of_Burundi.gif",alt:"",width:"100px",height:"100px"}}),e("h1",{staticStyle:{color:"var(--primary)","font-size":"36px"}},[t._v("Gestion Laboratoire")])]),e("div",{staticClass:"form-group"},[t._m(0),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control form-control-lg",attrs:{type:"email",name:"email",placeholder:"Username",required:"",id:"id_mail",autocomplete:"on"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),e("div",{staticClass:"form-group"},[t._m(1),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control form-control-lg",attrs:{type:"password",placeholder:"password",name:"password",required:"",id:"id_password",autocomplete:"on"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t.logs.length>0?e("label",{staticStyle:{color:"red"},attrs:{for:"id_password"}},[t._v(t._s(t.logs))]):t._e(),e("button",{staticClass:"btn btn-lg btn-block btns",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[t._v("Sign In")]),e("p",{staticClass:"forgot-password text-right mt-2 mb-4"},[e("router-link",{attrs:{to:"/forgot-password"}},[e("strong",[t._v("Forgot password ?")])])],1),e("center",[t._v(" Developped by "),e("b",[e("a",{attrs:{href:"https://github.com/Desire1990"}},[t._v("Desos")])])])],1)])])])},w=[function(){var t=this,e=t._self._c;return e("label",[e("h3",[t._v("Username")])])},function(){var t=this,e=t._self._c;return e("label",[e("h3",[t._v("Password")])])}],$=s(792),x={data(){return{logs:"",username:"",password:"",url:this.$store.state.url}},mounted(){document.title="Sign in | GestionⒸLabo"},methods:{login(){this.logs="loging in...",l().post(this.url+"/login/",{username:this.username,password:this.password}).then((t=>{this.$store.state.user=t.data;const e=this.$route.query.to||"/";this.$router.push(e),(0,$.toast)({message:"logged in successfully!",type:"is-success",dismissible:!0,duration:2e3,position:"center"}),this.$router.push("/")})).catch((t=>{t.response?this.logs="Invalid username or password...":this.logs=JSON.stringify(t.response.data)}))}}},S=x,k=(0,m.Z)(S,y,w,!1,null,"77b9ad73",null),q=k.exports,P={name:"App",data:()=>({navOpen:!0,cartCount:0}),components:{TheTopbar:p,TheSidebar:C,Login:q},computed:{logged_in(){return null!=this.$store.state.user}},mounted(){var t=JSON.parse(localStorage.getItem("user"));t?this.$store.state.user=t:console.warn("il y'a pas de session")},watch:{"$store.state.user":{deep:!0,handler(t){localStorage.setItem("user",JSON.stringify(t))}}},methods:{loggout(){confirm("êtes vous sur de vouloir se deconnecter?")&&(this.$store.state.user=null)}}},D=P,I=(0,m.Z)(D,i,r,!1,null,null,null),L=I.exports,N=s(345),O=function(){var t=this,e=t._self._c;return e("domain")},T=[],A=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"vue"}},[e("h1",[t._v("Sélectionnez un domaine")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.search_term,expression:"search_term"}],staticClass:"search",attrs:{placeholder:"Search a domain, or category name"},domProps:{value:t.search_term},on:{input:function(e){e.target.composing||(t.search_term=e.target.value)}}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading"}),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"images-wrapper"},[e("transition-group",{staticClass:"images-inner",attrs:{name:"image-wrapper",tag:"div"}},t._l(t.items.results,(function(s,a){return e("div",{key:s.id+a,staticClass:"image-wrapper",on:{click:function(e){return t.goTo(s)}}},[e("div",{staticClass:"image-img"},[e("img",{staticClass:"card-img-top",attrs:{src:"https://memoire.amidev.bi"+s.get_thumbnail,alt:"image.name"}})]),e("div",{staticClass:"image-details"},[e("h3",{staticClass:"image-title",on:{click:function(e){return t.goTo(s)}}},[t._v(" "+t._s(s.name)+" ")])])])})),0)],1)])},F=[],B={data(){return{loading:!1,imagesLimit:15,allLoaded:!1,search_term:"",items:this.$store.state.domains}},watch:{"$store.state.domains"(t){this.items=t},search_term(t){this.dosearch(t)}},methods:{dosearch(t){l().get(this.$store.state.url+`/domain/?search=${this.search_term}`,this.header).then((t=>{this.$store.state.domains=t.data,this.items=t.data})).catch((t=>{console.error(t)}))},goTo(t){this.$router.push(`/domain/${t.id}/category`)}},mounted(){l().get(this.$store.state.url+"/domain/",this.header).then((t=>{this.items=t.data,console.log(t.data)})).catch((t=>{console.error(t)}))},computed:{header(){return{headers:{Authorization:`Bearer ${this.$store.state.user.access}`}}}}},Z=B,E=(0,m.Z)(Z,A,F,!1,null,"0afd165c",null),Q=E.exports,U={components:{domain:Q},mounted(){document.title="Dashboard | Gestion Labo"}},J=U,z=(0,m.Z)(J,O,T,!1,null,null,null),R=z.exports,j=function(){var t=this,e=t._self._c;return e("domain")},V=[],M=function(){var t=this,e=t._self._c;return e("div",{staticClass:"products"},[t._m(0),t._l(t.categories.results,(function(t){return e("CategoryItem",{key:t.id,staticClass:"categories__item",attrs:{category:t}})}))],2)},G=[function(){var t=this,e=t._self._c;return e("div",[e("h1",[t._v("Categories")]),e("hr")])}],Y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("center",[e("h5",{staticClass:"card-title"},[t._v(t._s(t.category.name))]),e("button",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return t.goTo(t.category)}}},[t._v(" products ")])])],1)])},W=[],H={name:"CategoriesItem",props:["category"],data(){return{}},methods:{getIcon(t){return null==t.image?"/img/item.png":t.image},increaseQtt:function(){this.cart.add(this.item)},decreaseQtt:function(){this.cart.decrease(this.item.id)},goTo(t){this.$router.push(`/category/${t.id}/products`)},enableEdition(){0!=this.item.quantite&&(this.editable=!0)}},computed:{qtt:{get(){return this.cart.getQuantite(this.item.id)},set(t){0!=t.length&&this.cart.add(this.item,t)}}}},K=H,X=(0,m.Z)(K,Y,W,!1,null,"6395d761",null),tt=X.exports,et={components:{CategoryItem:tt},name:"category",data(){return{categories:[],id:this.$route.params.id}},mounted(){l().get(this.$store.state.url+"/category/?domain="+this.id,this.header).then((t=>{this.categories=t.data,console.log(t.data)})).catch((t=>{console.error(t)}))},computed:{header(){return{headers:{Authorization:`Bearer ${this.$store.state.user.access}`}}}}},st=et,at=(0,m.Z)(st,M,G,!1,null,null,null),it=at.exports,rt={components:{domain:it},mounted(){document.title="Dashboard | Gestion Labo"}},ot=rt,nt=(0,m.Z)(ot,j,V,!1,null,null,null),ct=nt.exports,lt=function(){var t=this,e=t._self._c;return e("domain")},dt=[],ut=function(){var t=this,e=t._self._c;return e("div",{staticClass:"products"},[e("h1",[t._v("Products")]),e("hr"),t._l(t.products.results,(function(t){return e("ProductItem",{key:t.id,staticClass:"products__item",attrs:{product:t}})}))],2)},mt=[],ht=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("body",[e("main",[e("div",{staticClass:"cards"},[e("div",{staticClass:"card__title"},[t._m(0),e("h3",[t._v(t._s(t.product.reference))])]),e("div",{staticClass:"card__body"},[e("div",{staticClass:"half"},[e("div",{staticClass:"featured_text"},[e("p",[t._v(t._s(t.product.materiel))]),e("p",{staticClass:"price",staticStyle:{color:"white"}},[t._v(t._s(t.product.quantite)+" "+t._s(t.product.unite))])])]),e("div",{staticClass:"half"},[e("div",{staticClass:"description"},[e("p",{staticStyle:{color:"white"}},[t._v(t._s(t.product.designation))])]),t._m(1),t._m(2)])]),e("div",{staticClass:"card__footer"},[e("div",{staticClass:"action"},[e("p",{staticClass:"text-center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],staticClass:"form-control",attrs:{type:"float",placeholder:"Qty",min:"1"},domProps:{value:t.quantity},on:{input:function(e){e.target.composing||(t.quantity=e.target.value)}}})]),e("button",{attrs:{type:"button"},on:{click:function(e){return t.addToCart(t.product)}}},[t._v("Add to cart")])])])])])])])},pt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"icon"},[e("a",{attrs:{href:"#"}},[e("i",{staticClass:"fa fa-arrow-left"})])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"stock"},[e("i",{staticClass:"fa fa-pen"}),t._v(" In stock")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"reviews"},[e("ul",{staticClass:"stars"},[e("li",[e("i",{staticClass:"fa fa-star"})]),e("li",[e("i",{staticClass:"fa fa-star"})]),e("li",[e("i",{staticClass:"fa fa-star"})]),e("li",[e("i",{staticClass:"fa fa-star"})]),e("li",[e("i",{staticClass:"fa fa-star-o"})])])])}],vt={name:"ProductsItem",props:["product"],data(){return{quantity:1}},methods:{addToCart(){(isNaN(this.quantity)||this.quantity<1)&&(this.quantity=1);const t={product:this.product,quantity:this.quantity};this.$store.commit("addToCart",t)},getIcon(t){return null==t.image?"/img/item.png":t.image},increaseQtt:function(){this.cart.add(this.item)},decreaseQtt:function(){this.cart.decrease(this.item.id)},enableEdition(){0!=this.item.quantite&&(this.editable=!0)}},computed:{qtt:{get(){return this.cart.getQuantite(this.item.id)},set(t){0!=t.length&&this.cart.add(this.item,t)}}}},_t=vt,ft=(0,m.Z)(_t,ht,pt,!1,null,"549f130c",null),gt=ft.exports,bt={components:{ProductItem:gt},name:"product",data(){return{products:[],id:this.$route.params.id}},mounted(){l().get(this.$store.state.url+"/produit/?category="+this.id,this.header).then((t=>{this.products=t.data,console.log(t.data)})).catch((t=>{console.error(t)}))}},Ct=bt,yt=(0,m.Z)(Ct,ut,mt,!1,null,null,null),wt=yt.exports,$t={components:{domain:wt},mounted(){document.title="All products | Gestion Labo"}},xt=$t,St=(0,m.Z)(xt,lt,dt,!1,null,null,null),kt=St.exports,qt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"parent"},[e("div",{staticClass:"form-inline my-2 my-lg-0 top",staticStyle:{padding:"20px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search_term,expression:"search_term"}],staticClass:"form-control mr-sm-2",attrs:{type:"text",placeholder:"Search","aria-label":"Search"},domProps:{value:t.search_term},on:{input:function(e){e.target.composing||(t.search_term=e.target.value)}}}),e("button",{attrs:{type:"reset"},on:{click:function(e){t.search_term=""}}},[t._v("×")])]),e("div",{staticClass:"btns"},[e("button",{on:{click:t.generateCSV}},[e("fa",{attrs:{icon:"download"}}),t._v(" Download")],1),e("button",{on:{click:function(t){t.preventDefault()}}},[e("fa",{attrs:{icon:"upload"}}),t._v(" Upload ")],1),e("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"text/csv"},on:{change:t.uploadCSV}})]),e("div",{staticClass:"recycler"}),e("div",{staticClass:"scrollable-tab"},[e("table",{staticClass:"table paiements"},[e("thead",[e("tr",{staticClass:"panier-item"},[e("th",[t._v("#")]),e("th",[t._v("Categorie")]),e("th",[t._v("Reference")]),e("th",[t._v("Materiel")]),e("th",[t._v("Designation")]),e("th",[t._v("Quantites")]),e("th",[t._v("Date de Peremption")]),e("th",[t._v("Status")]),e("th",[e("button",{on:{click:function(e){t.add_mode=!0}}},[t._v("Create")])])])]),e("tbody",{attrs:{id:"paiements"}},t._l(t.items.results,(function(s,a){return e("tr",{key:s.id,class:t.level(s.quantite)},[e("td",[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.category.name))]),e("td",[t._v(t._s(s.reference))]),e("td",[t._v(t._s(s.materiel))]),e("td",[t._v(t._s(s.designation))]),e("td",[t._v(t._s(s.quantite)+" "+t._s(s.unite))]),e("td",[t._v(t._s(t.datetime(s.date_peremption)))]),e("td",[t._v(t._s(s.status))]),e("td",[e("div",{staticClass:"btns"},[e("button",{on:{click:function(e){return e.preventDefault(),t.startEdit(s)}}},[t._v("Edit")]),e("button",{on:{click:function(e){return e.preventDefault(),t.startCommande(s)}}},[t._v("Augmenter")]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return e.preventDefault(),t.Delete(s)}}},[t._v("Delete")])])])])})),0)])]),e("EditDialog",{attrs:{visible:t.edit_mode,produit:t.active_item},on:{close:t.exitEdition}}),e("AchatDialog",{attrs:{visible:t.achat_mode,produit:t.active_item},on:{close:t.exitEdition}}),e("ProduitDialog",{attrs:{visible:t.add_mode},on:{close:t.exitEdition}})],1)},Pt=[],Dt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"Keyword",id:"id_username",autofocus:""},domProps:{value:t.keyword},on:{keydown:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),e("button",{attrs:{type:"reset"},on:{click:function(e){t.keyword=""}}},[t._v("×")]),t.show_date?e("div",{staticStyle:{display:"inline"}},[e("button",{staticStyle:{"margin-left":"0"}},[t._v(" Date ")]),t.triggered?e("div",{staticClass:"form"},[e("label",[t._v("Du:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.date.du,expression:"date.du"}],attrs:{type:"date",name:"date_du"},domProps:{value:t.date.du},on:{input:function(e){e.target.composing||t.$set(t.date,"du",e.target.value)}}}),e("label",[t._v("Au:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.date.au,expression:"date.au"}],attrs:{type:"date",name:"date_au"},domProps:{value:t.date.au},on:{input:function(e){e.target.composing||t.$set(t.date,"au",e.target.value)}}}),e("input",{staticStyle:{border:"1px solid black"},attrs:{type:"submit",value:"search"},on:{click:t.performSearch}})]):t._e()]):t._e()])},It=[],Lt={props:{show_date:{type:Boolean,default:!1}},components:{},data(){return{keyword:"",date:{du:null,au:null},triggered:!1}},watch:{keyword(t){this.$emit("searched",t)}},methods:{performSearch(){this.triggered=!1,this.$emit("changed",this.date)},changeColor(t){"red"==t&&(document.documentElement.style.setProperty("--primary","#d55"),document.documentElement.style.setProperty("--primary-light","#faa"),document.documentElement.style.setProperty("--hover","#faa")),"green"==t&&(document.documentElement.style.setProperty("--primary","green"),document.documentElement.style.setProperty("--primary-light","#595"),document.documentElement.style.setProperty("--hover","#595")),"blue"==t&&(document.documentElement.style.setProperty("--primary","#08a"),document.documentElement.style.setProperty("--primary-light","lightblue"),document.documentElement.style.setProperty("--hover","#29b"))}}},Nt=Lt,Ot=(0,m.Z)(Nt,Dt,It,!1,null,"c9fbae60",null),Tt=Ot.exports,At=function(){var t=this,e=t._self._c;return e("div",{class:{popup:!0,active:t.visible},on:{click:t.close}},[e("div",{staticClass:"popup-body",on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[e("center",[e("h3",[t._v("Modifier "+t._s(t.produit.materiel))])]),e("form",{attrs:{method:"post"}},[e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_unite"}},[t._v("Materiel:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_produit.materiel,expression:"new_produit.materiel"}],attrs:{type:"text",id:"id_unite"},domProps:{value:t.new_produit.materiel},on:{input:function(e){e.target.composing||t.$set(t.new_produit,"materiel",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_unite"}},[t._v("Reference")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_produit.reference,expression:"new_produit.reference"}],attrs:{type:"text",id:"id_unite"},domProps:{value:t.new_produit.reference},on:{input:function(e){e.target.composing||t.$set(t.new_produit,"reference",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_prix"}},[t._v("Quantite:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_produit.quantite,expression:"new_produit.quantite"}],attrs:{type:"number",name:"prix",placeholder:"prix",required:"",id:"id_quantite"},domProps:{value:t.new_produit.quantite},on:{input:function(e){e.target.composing||t.$set(t.new_produit,"quantite",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_sortant"}},[t._v("Unité:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_produit.unite,expression:"new_produit.unite"}],attrs:{type:"text",id:"id_sortant",placeholder:"kg, l, g, mg, ml, ..."},domProps:{value:t.new_produit.unite},on:{input:function(e){e.target.composing||t.$set(t.new_produit,"unite",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"status"}},[t._v("Status:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.new_produit.status,expression:"new_produit.status"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.new_produit,"status",e.target.multiple?s:s[0])}}},[e("option",{attrs:{disabled:"",value:""}},[t._v("Selectionnez le status du materiel ...")]),e("option",[t._v("fonctionel")]),e("option",[t._v("non-fonctionel")]),e("option",[t._v("reparable")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_produit.status,expression:"new_produit.status"}],attrs:{type:"text",id:"id_sortant",placeholder:"kg, l, g, mg, ml, ..."},domProps:{value:t.new_produit.status},on:{input:function(e){e.target.composing||t.$set(t.new_produit,"status",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_rapport"}},[t._v("Date de Peremption:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_produit.date_peremption,expression:"new_produit.date_peremption"}],attrs:{type:"text",id:"id_rapport"},domProps:{value:t.new_produit.date_peremption},on:{input:function(e){e.target.composing||t.$set(t.new_produit,"date_peremption",e.target.value)}}})]),e("div",{staticClass:"buttons"},[e("div",{staticClass:"logs"},[t._v(t._s(t.logs))]),e("input",{attrs:{type:"submit",value:"Modifier"},on:{click:t.Update}})])])],1)])},Ft=[],Bt={props:{visible:{type:Boolean,default:!1},produit:{type:Object,required:!0}},data(){return{logs:"",new_price:"",new_produit:""}},watch:{produit(t){this.new_produit=JSON.parse(JSON.stringify(t))}},methods:{close(){this.$emit("close")},Update(){let t={headers:{Authorization:"Bearer "+this.$store.state.user.access}};l().put(this.$store.state.url+`/produit/${this.produit.id}/`,this.new_produit,t).then((t=>{let e=this.$store.state.produits;for(var s=0;s<e.length;s++){let a=e[s];a.id==this.produit.id&&(this.$store.state.produits[s]=t.data,this.$emit("close"))}})).catch((t=>{console.error(t)}))}}},Zt=Bt,Et=(0,m.Z)(Zt,At,Ft,!1,null,"3cdc5a98",null),Qt=Et.exports,Ut=function(){var t=this,e=t._self._c;return e("div",{class:{popup:!0,active:t.visible},on:{click:t.close}},[e("div",{ref:"modal",staticClass:"popup-body",on:{click:function(t){t.stopPropagation()}}},[e("center",[e("h3",[t._v("Ajouter un Produit")])]),e("form",{attrs:{method:"post"}},[e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_nom"}},[t._v("Categorie")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.laboratoire.name,expression:"laboratoire.name"}],attrs:{type:"text",list:"noms",id:"id_nom"},domProps:{value:t.laboratoire.name},on:{change:t.setId,input:function(e){e.target.composing||t.$set(t.laboratoire,"name",e.target.value)}}})]),e("datalist",{attrs:{id:"noms"}},t._l(t.categories.results,(function(t){return e("option",{domProps:{value:t.name}})})),0),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_nom"}},[t._v("Materiel:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.produit.materiel,expression:"produit.materiel"}],attrs:{type:"text",id:"id_nom",placeholder:"le nom du produit"},domProps:{value:t.produit.materiel},on:{input:function(e){e.target.composing||t.$set(t.produit,"materiel",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_nom"}},[t._v("Reference:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.produit.reference,expression:"produit.reference"}],attrs:{type:"text",id:"id_nom",placeholder:"la reference du produit"},domProps:{value:t.produit.reference},on:{input:function(e){e.target.composing||t.$set(t.produit,"reference",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_nom"}},[t._v("Designation:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.produit.designation,expression:"produit.designation"}],attrs:{type:"text",id:"id_nom",placeholder:"le description du produit"},domProps:{value:t.produit.designation},on:{input:function(e){e.target.composing||t.$set(t.produit,"designation",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_nom"}},[t._v("Quantite:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.produit.quantite,expression:"produit.quantite"}],attrs:{type:"number",id:"id_nom",placeholder:"le description du produit"},domProps:{value:t.produit.quantite},on:{input:function(e){e.target.composing||t.$set(t.produit,"quantite",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_entrant"}},[t._v("Unité :")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.produit.unite,expression:"produit.unite"}],attrs:{name:"unite",id:"",value:"Selectionnez l'unite"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.produit,"unite",e.target.multiple?s:s[0])}}},[e("option",{attrs:{disabled:"",value:"Selectionnez l'unite"}},[t._v("Selectionnez l'unite ...")]),e("option",[t._v("kg")]),e("option",[t._v("g")]),e("option",[t._v("pc(s)")]),e("option",[t._v("l")]),e("option",[t._v("ml")])])]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_entrant"}},[t._v("Status :")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.produit.status,expression:"produit.status"}],attrs:{name:"status",id:"",value:"Selectionnez le status du materiel"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.produit,"status",e.target.multiple?s:s[0])}}},[e("option",{attrs:{disabled:"",value:" "}},[t._v("Selectionnez le status du materiel ...")]),e("option",[t._v("fonctionel")]),e("option",[t._v("non-fonctionel")]),e("option",[t._v("reparable")])])]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_prix"}},[t._v("date de peremption:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.produit.date_peremption,expression:"produit.date_peremption"}],attrs:{type:"date",name:"prix",placeholder:"date de peremption",id:"id_prix"},domProps:{value:t.produit.date_peremption},on:{input:function(e){e.target.composing||t.$set(t.produit,"date_peremption",e.target.value)}}})]),e("div",{staticClass:"logs"},[t._v(t._s(t.logs))]),e("div",{staticClass:"buttons"},[e("button",{on:{click:function(e){return e.preventDefault(),t.generateCSV.apply(null,arguments)}}},[e("fa",{attrs:{icon:"download"}}),t._v(" Model ")],1),e("button",{on:{click:function(e){return e.preventDefault(),t.onPickFile.apply(null,arguments)}}},[e("fa",{attrs:{icon:"upload"}}),t._v(" Charger ")],1),e("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:".csv"},on:{change:t.loadCSV}}),e("button",{ref:"submit",on:{click:function(e){return e.preventDefault(),t.createProduct.apply(null,arguments)}}},[t._v(" Créer ")])])])],1)])},Jt=[],zt={props:{visible:{type:Boolean,default:!1},modelaVisible:!0},data(){return{laboratoire:{name:""},logs:"",produit:{},new_price:"",csv_array:[],csvData:{size:0,fileData:[]}}},watch:{csv_array(t){if(0==t.length)return this.logs="",void(this.$refs.submit.innerText="Créer");this.logs=t.length+" produits chargés",this.$refs.submit.innerText="upload"}},computed:{categories(){return this.$store.state.categories},rapport(){let t="1 "+this.produit.unite+" vaut combien de "+this.produit.unite_sortant+"?";return this.produit.unite_sortant?t:"1 par defaut"},unite_sortant(){return this.produit.unite?this.produit.unite+" par defaut":"exemples: kg,carton,casier..."},headers(){return{headers:{Authorization:"Bearer "+this.$store.state.user.access}}}},mounted(){this.categories.length<1&&l().get(this.$store.state.url+"/category/",this.headers).then((t=>{this.$store.state.categories=t.data})).catch((t=>{})),this.fetchProducts()},methods:{setId(){for(let t of this.$store.state.categories)if(t.id==this.laboratoire.id)return void(this.laboratoire.name=t.name)},setName(){for(let t of this.$store.state.categories)if(t.name==this.laboratoire.name)return void(this.laboratoire.id=t.id)},close(){this.$emit("close")},uploadCSV(){l().post(this.$store.state.url+"/produit/",this.csv_array,this.headers).then((t=>{this.$store.state.products=this.$store.state.produits.concat(t.data),this.csv_array=[],this.close()})).catch((t=>{console.error(t)}))},fetchProducts(){l().get(this.$store.state.url+"/produit/",this.headers).then((t=>{this.$store.state.products=t.data})).catch((t=>{console.error(t)}))},createProduct(){if(this.csv_array.length>0)return void this.uploadCSV();this.produit.materiel?this.produit.unite?this.produit.date_peremption?this.produit.designation?this.produit.status?this.produit.reference?(this.produit.quantite||(this.produit.quantite=0,this.logs=""),this.produit.category||(this.produit.category=this.laboratoire,this.logs=""),l().post(this.$store.state.url+"/produit/",this.produit,this.headers).then((t=>{this.$emit("close"),this.fetchProducts()})).catch((t=>{console.error(t)}))):this.logs="la reference est obligatoire":this.logs="status est obligatoire":this.logs="la date est obligatoire":this.logs="la date de peremption est obligatoire":this.logs="l'unité est obligatoire":this.logs="le materiel est obligatoire"},download(t){const e=new Blob([t],{type:"text/csv"}),s=window.URL.createObjectURL(e),a=document.createElement("a");a.setAttribute("hidden",""),a.setAttribute("href",s),a.setAttribute("download","model.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},generateCSV(){let t="id,reference,materiel,designation,quantite,date de peremption,status\n";this.download(t)},onPickFile(){this.$refs.fileInput.click()},loadCSV(t){if(t.target.files&&t.target.files[0]){let e=new FileReader;e.readAsBinaryString(t.target.files[0]),e.onload=t=>{this.csvData.size=t.total,this.csvData.fileData=t.target.result;let e=this.convertToJSON(this.csvData.fileData);this.csv_array=e}}},convertToJSON(t){let e=t.trim().split("\n"),s=[],a=e[0].trim().split(";"),i=[],r={};e=e.slice(1);for(let o=0;o<e.length;o++){i=e[o].trim().split(";");for(let t=0;t<i.length;t++)r[a[t]]=i[t];s.push(r),r={}}return s}}},Rt=zt,jt=(0,m.Z)(Rt,Ut,Jt,!1,null,"7efa5993",null),Vt=jt.exports,Mt=function(){var t=this,e=t._self._c;return e("div",{class:{popup:!0,active:t.visible},on:{click:t.close}},[e("div",{staticClass:"popup-body",on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[e("center",[e("h3",[t._v("Augmenter "+t._s(t.produit.materiel))])]),e("form",{attrs:{method:"post"}},[e("div",{staticClass:"inline_field"},[e("div",{staticClass:"field"},[e("label",{attrs:{for:"lg_qtt"}},[t._v("Quantite in Stock "+t._s(t.produit.quantite)+t._s(t.produit.unite)+":")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_produit.quantite,expression:"new_produit.quantite"}],attrs:{type:"number",id:"lg_qtt"},domProps:{value:t.new_produit.quantite},on:{input:function(e){e.target.composing||t.$set(t.new_produit,"quantite",e.target.value)}}})])]),e("div",{staticClass:"buttons"},[e("input",{attrs:{type:"submit",value:"submit"},on:{click:t.submit}})])])],1)])},Gt=[],Yt={props:{visible:{type:Boolean,default:!1},produit:{type:Object,required:!0},achat:{type:Object,required:!1}},data(){return{lg_qtt:0,new_produit:""}},watch:{produit(t){this.new_produit=JSON.parse(JSON.stringify(t))}},mounted(){this.fetchProducts},computed:{qttTotal(){return this.produit.quantite},headers(){return{headers:{Authorization:"Bearer "+this.$store.state.user.access}}}},methods:{close(){this.lg_qtt=0,this.sm_qtt=0,this.$emit("close")},submit(){this.augmenter()},fetchProducts(){l().get(this.$store.state.url+"/produit/",this.header).then((t=>{this.$store.state.products=t.data,this.items=t.data,this.datas=t.data.results,console.log(t.data)})).catch((t=>{if("token_not_valid"==t.response.data.code){let t={refresh:this.$store.state.user.refresh};l().post(this.$store.state.url+"/refresh/",t).then((t=>{this.$store.state.user.access=t.data.access,this.fetchProducts()})).catch((t=>{this.$store.state.user=null}))}}))},augmenter(){let t={headers:{Authorization:"Bearer "+this.$store.state.user.access}};l().patch(this.$store.state.url+`/produit/${this.produit.id}/`,this.new_produit,t).then((t=>{this.$emit("close"),this.fetchProducts()})).catch((t=>{console.error(t)}))}}},Wt=Yt,Ht=(0,m.Z)(Wt,Mt,Gt,!1,null,"f1898e76",null),Kt=Ht.exports,Xt={components:{EditDialog:Qt,AchatDialog:Kt,ProduitDialog:Vt,SearchBar:Tt},data(){return{csvData:{},items:this.$store.state.products,datas:[],active_item:{},edit_mode:!1,achat_mode:!1,add_mode:!1,search_term:""}},watch:{"$store.state.products"(t){this.items=t},search_term(t){this.dosearch(t)}},methods:{Delete(t){confirm("Delete "+t.id)&&l()["delete"](this.$store.state.url+`/produit/${t.id}/`,this.header).then((t=>(this.fetchProducts(),t)))},dosearch(t){l().get(this.$store.state.url+`/produit/?search=${this.search_term}`,this.header).then((t=>{this.$store.state.products=t.data})).catch((t=>{console.error(t)}))},performFilter(t){let e=this.$store.state.products.filter((e=>e.id==t|e.nom.toLowerCase().includes(t.toLowerCase())));this.items=e},fetchProducts(){l().get(this.$store.state.url+"/produit/",this.header).then((t=>{this.$store.state.products=t.data,this.items=t.data,this.datas=t.data.results,console.log(t.data)})).catch((t=>{if("token_not_valid"==t.response.data.code){let t={refresh:this.$store.state.user.refresh};l().post(this.$store.state.url+"/refresh/",t).then((t=>{this.$store.state.user.access=t.data.access,this.fetchProducts()})).catch((t=>{this.$store.state.user=null}))}}))},exitEdition(){this.active_item={},this.edit_mode=!1,this.achat_mode=!1,this.add_mode=!1},startEdit(t){this.active_item=t,this.edit_mode=!0},startCommande(t){this.active_item=t,this.achat_mode=!0},performFilter(t){let e=this.$store.state.products.filter((e=>e.id==t|e.nom.toLowerCase().includes(t.toLowerCase())));this.items=e},download(t){const e=new Blob([t],{type:"text/csv"}),s=window.URL.createObjectURL(e),a=document.createElement("a");a.setAttribute("hidden",""),a.setAttribute("href",s),a.setAttribute("download","data.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},generateCSV(){let t=this.datas,e="id,Reference,Materiel,Designation,Quantite,date de peremption,Status\n";for(var s=0;s<t.length;s++)e+=t[s].id+","+t[s].reference+","+t[s].materiel+","+t[s].designation+","+t[s].quantite+t[s].unite+","+t[s].date_peremption+","+t[s].status+"\n";this.download(e)},level(t){return 0==t?"empty":t<=5?"low":void 0},onPickFile(){this.$refs.fileInput.click()},uploadCSV(t){if(t.target.files&&t.target.files[0]){let e=new FileReader;e.readAsBinaryString(t.target.files[0]),e.onload=t=>{console.log(t),this.csvData.size=t.total,this.csvData.fileData=t.target.result;let e=this.convertToJSON(this.csvData.fileData);console.log(e),console.table(e)}}},convertToJSON(t){let e=t.trim().split("\n"),s=[],a=e[0].split(";"),i=[],r={};e=e.slice(1);for(let o=0;o<e.length;o++){i=e[o].split(";");for(let t=0;t<i.length;t++)if(0===i.indexOf(i[t])||isNaN(i[t]))r[a[t]]=i[t];else{let e=Number.parseFloat(i[t]);r[a[t]]=e.toFixed(2)}s.push(r),r={}}return s}},mounted(){document.title="Stock |produits",this.fetchProducts()}},te=Xt,ee=(0,m.Z)(te,qt,Pt,!1,null,"41a6d278",null),se=ee.exports,ae=function(){var t=this,e=t._self._c;return e("domain")},ie=[],re=function(){var t=this,e=t._self._c;return e("div",{staticClass:"products"},[e("div",[e("router-link",{staticClass:"button is-success",attrs:{to:"/cart-order",id:"cart"}},[e("i",{staticClass:"fa fa-shopping-cart"},[t._v(" ("+t._s(t.length)+")")])])],1),e("h1",[t._v("Mon Stock")]),e("br"),t._l(t.bonLivraisonItems.results,(function(t){return e("StockItem",{key:t.id,staticClass:"stock__item",attrs:{product:t}})}))],2)},oe=[],ne=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("div",{staticClass:"header"},[e("h5",{staticClass:"card-title"},[t._v(t._s(t.product.product.materiel))])]),e("div",{staticClass:"card-body"},[e("center",[e("h6",{staticClass:"card-subtitle"},[t._v(t._s(t.product.product.reference))]),e("hr"),e("h4",{staticClass:"card-subtitle"},[t._v(t._s(t.product.bonLivraison.commande.departement.name)+"-"+t._s(t.product.bonLivraison.commande.departement.decanat.name))]),e("hr"),e("p",{staticClass:"card-text"},[t._v(" Qte Recue:"+t._s(t.product.qte_livree)+" "+t._s(t.product.product.unite))]),e("hr"),e("p",{staticClass:"card-text"},[t._v(" Qte Restante:"+t._s(t.product.qte_restante)+" "+t._s(t.product.product.unite))]),e("hr"),e("p",{staticClass:"text-center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],staticClass:"form-control",attrs:{type:"float",placeholder:"Qty",min:"1"},domProps:{value:t.quantity},on:{input:function(e){e.target.composing||(t.quantity=e.target.value)}}})]),e("button",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return t.addToCart(t.product)}}},[t._v("Add To Cart ")])])],1)])},ce=[],le={name:"StockItem",props:["product"],data(){return{quantity:1}},methods:{addToCart(){(isNaN(this.quantity)||this.quantity<1)&&(this.quantity=1);const t={product:this.product,quantity:this.quantity};this.$store.commit("AddToCart",t)},getIcon(t){return null==t.image?"/img/item.png":t.image},increaseQtt:function(){this.cart.add(this.item)},decreaseQtt:function(){this.cart.decrease(this.item.id)},enableEdition(){0!=this.item.quantite&&(this.editable=!0)}},computed:{qtt:{get(){return this.cart.getQuantite(this.item.id)},set(t){0!=t.length&&this.cart.add(this.item,t)}}}},de=le,ue=(0,m.Z)(de,ne,ce,!1,null,"c3909fea",null),me=ue.exports,he={components:{StockItem:me},name:"product",data(){return{carts:{items:[]},bonLivraisonItems:this.$store.state.bonLivraisonItems}},computed:{logged_in(){return null!=this.$store.state.user},length(){let t=0;for(let e=0;e<this.carts.items.length;e++)t+=parseFloat(this.carts.items[e].quantity);return t}},mounted(){this.carts=this.$store.state.carts,l().get(this.$store.state.url+"/bonLivraisonItems/",this.header).then((t=>{this.bonLivraisonItems=t.data,console.log(t.data)})).catch((t=>{console.error(t)}))}},pe=he,ve=(0,m.Z)(pe,re,oe,!1,null,"39518503",null),_e=ve.exports,fe={components:{domain:_e},mounted(){document.title="All products | Gestion Labo"}},ge=fe,be=(0,m.Z)(ge,ae,ie,!1,null,null,null),Ce=be.exports,ye=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-cart container"},[e("div",{staticClass:"columns is-multiline"},[t._m(0),e("div",{staticClass:"column is-12 box"},[t.cartTotalLength?e("table",{staticClass:"table is-fullwidth"},[t._m(1),e("tbody",t._l(t.cart.items,(function(s){return e("CartItem",{key:s.id,attrs:{initialItem:s},on:{removeFromCart:t.removeFromCart}})})),1)]):e("p",[t._v("You don't have any product in your cart...")])]),e("div",{staticClass:"container"},[e("h2",[t._v("Summary : "),e("strong",[t._v(" "+t._s(t.cartTotalLength))]),t._v(" items ")]),0!=t.cartTotalLength?e("center",[e("router-link",{staticClass:"btn btn-success",attrs:{to:"/cart/checkout"}},[t._v("Proceed to checkout")])],1):t._e()],1)])])},we=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"column is-12"},[e("h1",{staticClass:"title"},[t._v("Cart")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v("Product")]),e("th",[t._v("Reference")]),e("th",[t._v("Qtes en stock")]),e("th",[t._v("Qte commande")]),e("th",[t._v("Action")])])])}],$e=function(){var t=this,e=t._self._c;return e("tr",[e("th",[t._v(t._s(t.item.product.id))]),e("td",[e("router-link",{attrs:{to:t.item.product.get_absolute_url}},[t._v(t._s(t.item.product.materiel))])],1),e("th",[t._v(t._s(t.item.product.reference))]),e("th",[t._v(t._s(t.item.product.quantite)+" "+t._s(t.item.product.unite))]),e("td",[e("a",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return t.decrementQuantity(t.item)}}},[t._v("-")]),t._v("   "),e("a",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return t.incrementQuantity(t.item)}}},[t._v("+")]),t._v("   "+t._s(t.item.quantity)+t._s(t.item.product.unite)+" ")]),e("td",[e("button",{staticClass:"btn btn-danger btn-sm delete",on:{click:function(e){return t.removeFromCart(t.item)}}},[t._v("x")])])])},xe=[],Se={name:"CartItem",props:{initialItem:Object},data(){return{item:this.initialItem}},methods:{getItemTotal(t){return t.quantity*t.product.price},decrementQuantity(t){t.quantity-=1,0===t.quantity&&this.$emit("removeFromCart",t),this.updateCart()},incrementQuantity(t){t.quantity+=1,this.updateCart()},updateCart(){localStorage.setItem("cart",JSON.stringify(this.$store.state.cart))},removeFromCart(t){this.updateCart(),this.$emit("removeFromCart",t)}}},ke=Se,qe=(0,m.Z)(ke,$e,xe,!1,null,"24e2cd76",null),Pe=qe.exports,De={name:"Cart",components:{CartItem:Pe},data(){return{cart:{items:[]}}},mounted(){this.cart=this.$store.state.cart},methods:{updateCart(){localStorage.setItem("cart",JSON.stringify(this.$store.state.cart))},removeFromCart(t){this.cart.items=this.cart.items.filter((e=>e.product.id!==t.product.id)),this.updateCart()}},computed:{cartTotalLength(){return this.cart.items.reduce(((t,e)=>t+parseFloat(e.quantity)),0)}}},Ie=De,Le=(0,m.Z)(Ie,ye,we,!1,null,"b45c8fba",null),Ne=Le.exports,Oe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-cart container"},[e("div",{staticClass:"columns is-multiline"},[t._m(0),e("div",{staticClass:"column is-12 box"},[t.cartTotalLength?e("table",{staticClass:"table is-fullwidth"},[t._m(1),e("tbody",t._l(t.carts.items,(function(s){return e("CartItem",{key:s.id,attrs:{initialItems:s},on:{removeFromCart:t.removeFromCart}})})),1)]):e("p",[t._v("You don't have any product in your cart...")])]),e("div",{staticClass:"container"},[e("h2",[t._v("Summary : "),e("strong",[t._v(" "+t._s(t.cartTotalLength))]),t._v(" items ")]),0!=t.cartTotalLength?e("center",[e("router-link",{staticClass:"btn btn-success",attrs:{to:"/cart/checkorder"}},[t._v("Proceed to checkout")])],1):t._e()],1)])])},Te=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"column is-12"},[e("h1",{staticClass:"title"},[t._v("Stock Cart")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v("Product")]),e("th",[t._v("Reference")]),e("th",[t._v("Qtes en stock")]),e("th",[t._v("Qte commande")]),e("th",[t._v("Action")])])])}],Ae=function(){var t=this,e=t._self._c;return e("tr",[e("th",[t._v(t._s(t.item.product.id))]),e("th",[t._v(t._s(t.item.product.product.materiel))]),e("th",[t._v(t._s(t.item.product.product.reference))]),e("th",[t._v(t._s(t.item.product.qte_livree)+" "+t._s(t.item.product.product.unite))]),e("td",[e("th",[e("a",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return t.decrementQuantity(t.item)}}},[t._v("-")]),t._v("   "),e("a",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return t.incrementQuantity(t.item)}}},[t._v("+")]),t._v("   ")]),e("th",[t._v(t._s(t.item.quantity)+" "+t._s(t.item.product.product.unite))])]),e("td",[e("button",{staticClass:"btn btn-danger btn-sm delete",on:{click:function(e){return t.removeFromCart(t.item)}}},[t._v("x")])])])},Fe=[],Be={name:"StockItem",props:{initialItems:Object},data(){return{item:this.initialItems}},methods:{getItemTotal(t){return t.quantity*t.product.price},decrementQuantity(t){t.quantity-=1,0===t.quantity&&this.$emit("removeFromCart",t),this.updateCart()},incrementQuantity(t){t.quantity+=1,this.updateCart()},updateCart(){localStorage.setItem("carts",JSON.stringify(this.$store.state.carts))},removeFromCart(t){this.updateCart(),this.$emit("removeFromCart",t)}}},Ze=Be,Ee=(0,m.Z)(Ze,Ae,Fe,!1,null,"758be50e",null),Qe=Ee.exports,Ue={name:"Cart",components:{CartItem:Qe},data(){return{carts:{items:[]}}},mounted(){this.carts=this.$store.state.carts},methods:{updateCart(){localStorage.setItem("carts",JSON.stringify(this.$store.state.carts))},removeFromCart(t){this.carts.items=this.cart.items.filter((e=>e.product.id!==t.product.id)),this.updateCart()}},computed:{cartTotalLength(){return this.carts.items.reduce(((t,e)=>t+parseFloat(e.quantity)),0)}}},Je=Ue,ze=(0,m.Z)(Je,Oe,Te,!1,null,"edd03a88",null),Re=ze.exports,je=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"columns is-multiline"},[t._m(0),e("div",{staticClass:"column is-12"},[e("table",{staticClass:"table"},[t._m(1),e("tbody",t._l(t.cart.items,(function(s){return e("tr",{key:s.product.id},[e("td",[t._v(t._s(s.product.materiel))]),e("td",[t._v(t._s(s.product.reference))]),e("td",[t._v(t._s(s.quantity)+t._s(s.product.unite))])])})),0)])]),e("hr",{staticStyle:{"background-color":"red"}}),e("div",{staticClass:"column1 is-8"},[e("h2",{staticClass:"subtitle"},[t._v("Commande details")]),e("div",{staticClass:"columns is-multiline"},[e("div",{staticClass:"column is-6"},[e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_nom"}},[t._v("Numero de Commande")]),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.num_commande,expression:"num_commande"}],attrs:{type:"text"},domProps:{value:t.num_commande},on:{input:function(e){e.target.composing||(t.num_commande=e.target.value)}}})])])]),t.errors.length?e("div",{staticClass:"notification is-danger mt-4"},t._l(t.errors,(function(s){return e("p",{key:s},[t._v(t._s(s))])})),0):t._e(),t.cartTotalLength?[e("br"),e("button",{staticClass:"btn btn-primary",on:{click:t.submitForm}},[t._v("Submit")])]:t._e(),e("hr")],2)])])},Ve=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"column is-12"},[e("h1",{staticClass:"title"},[t._v("Checkout")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Product")]),e("th",[t._v("Reference")]),e("th",[t._v("Quantity")])])])}],Me={name:"Checkout",data(){return{laboratoire:{name:""},num_commande:"",user:"",cart:{items:[]},errors:[]}},mounted(){document.title="Commande | Labo",this.cart=this.$store.state.cart,this.cartTotalLength},methods:{submitForm(){const t=[];let e={};for(let s=0;s<this.cart.items.length;s++){const e=this.cart.items[s],a={product:e.product.id,quantity:e.quantity};t.push(a)}e={departement:this.$store.state.user.departement.id,num_commande:this.num_commande,items:t},console.log(e),l().post(this.$store.state.url+"/commande/",e,this.headers).then((t=>{this.$store.commit("clearCart"),this.$router.push("/cart/success")})).catch((t=>{this.errors.push("Something went wrong. Please try again"),console.log(t)})),this.$store.commit("setIsLoading",!1)}},computed:{laboratoires(){return this.$store.state.laboratoires},host(){return this.$store.state.url},username(){return this.$store.state.user.username},headers(){return{headers:{Authorization:"Bearer "+this.$store.state.user.access}}},cartTotalPrice(){return this.cart.items.reduce(((t,e)=>t+e.product.price*e.quantity),0)},cartTotalLength(){return this.cart.items.reduce(((t,e)=>t+e.quantity),0)}}},Ge=Me,Ye=(0,m.Z)(Ge,je,Ve,!1,null,"7c415b3a",null),We=Ye.exports,He=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"columns is-multiline"},[t._m(0),e("div",{staticClass:"column is-12"},[e("table",{staticClass:"table"},[t._m(1),e("tbody",t._l(t.carts.items,(function(s){return e("tr",{key:s.product.id},[e("td",[t._v(t._s(s.product.product.materiel))]),e("td",[t._v(t._s(s.product.product.reference))]),e("td",[t._v(t._s(s.quantity)+" "+t._s(s.product.unite))])])})),0)])]),e("hr",{staticStyle:{"background-color":"red"}}),e("div",{staticClass:"column1 is-8"},[e("h2",{staticClass:"subtitle"},[t._v("Order details")]),e("div",{staticClass:"columns is-multiline"},[e("div",{staticClass:"column is-6"},[e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_nom"}},[t._v("Numero")]),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.num_order,expression:"num_order"}],attrs:{type:"text"},domProps:{value:t.num_order},on:{input:function(e){e.target.composing||(t.num_order=e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_nom"}},[t._v("Description")]),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],attrs:{type:"text"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})])])]),t.errors.length?e("div",{staticClass:"notification is-danger mt-4"},t._l(t.errors,(function(s){return e("p",{key:s},[t._v(t._s(s))])})),0):t._e(),t.cartTotalLength?[e("br"),e("button",{staticClass:"btn btn-primary",on:{click:t.submitForm}},[t._v("Submit")])]:t._e(),e("hr")],2)])])},Ke=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"column is-12"},[e("h1",{staticClass:"title"},[t._v("Checkout")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Product")]),e("th",[t._v("Reference")]),e("th",[t._v("Quantity")])])])}],Xe={name:"Checkout",data(){return{num_order:"",description:"",user:"",carts:{items:[]},errors:[]}},mounted(){document.title="Commande | Labo",this.carts=this.$store.state.carts},methods:{submitForm(){const t=[];let e={};for(let s=0;s<this.carts.items.length;s++){const e=this.carts.items[s],a={product:e.product.id,quantity:e.quantity};t.push(a)}e={num_order:this.num_order,description:this.description,items:t},console.log(e),l().post(this.$store.state.url+"/order/",e,this.header).then((t=>{this.$store.commit("clear"),this.$router.push("/cart/success")})).catch((t=>{this.errors.push("Something went wrong. Please try again"),console.log(t)})),this.$store.commit("setIsLoading",!1)}},computed:{host(){return this.$store.state.url},username(){return this.$store.state.user.username},cartTotalPrice(){return this.carts.items.reduce(((t,e)=>t+e.product.price*e.quantity),0)},cartTotalLength(){return this.carts.items.reduce(((t,e)=>t+e.quantity),0)}}},ts=Xe,es=(0,m.Z)(ts,He,Ke,!1,null,"3d02c90a",null),ss=es.exports,as=function(){var t=this;t._self._c;return t._m(0)},is=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-success"},[e("div",{staticClass:"columns is-multiline"},[e("div",{staticClass:"column is-12 content"},[e("h1",{staticClass:"title"},[t._v("Thank You")]),e("p",[t._v("Your order will be processed!!"),e("br"),t._v("Welcome back ...")])])])])}],rs={name:"Success",mounted(){document.title="Success | Ecommerce Store"}},os=rs,ns=(0,m.Z)(os,as,is,!1,null,"8ee37dc6",null),cs=ns.exports,ls=function(){var t=this,e=t._self._c;return e("div",{staticClass:"parent"},[e("div",{staticClass:"form-inline my-2 my-lg-0 top",staticStyle:{"padding-top":"20px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search_term,expression:"search_term"}],staticClass:"form-control mr-sm-2",attrs:{type:"text",placeholder:"Search","aria-label":"Search"},domProps:{value:t.search_term},on:{input:function(e){e.target.composing||(t.search_term=e.target.value)}}})]),e("br"),e("div",{staticClass:"scrollable-tab"},[e("table",{staticClass:"table paiements"},[t._m(0),e("tbody",{attrs:{id:"paiements"}},t._l(t.items,(function(s,a){return e("tr",{key:s.id},[e("td",[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.utilisateur.user.first_name)+" "+t._s(s.utilisateur.user.last_name))]),e("td",[t._v(t._s(s.num_order))]),e("td",[t._v(t._s(t.datetime(s.created_at)))]),e("td",[t._v(t._s(s.status))]),e("td",[e("div",{staticClass:"btns"},[e("button",{on:{click:function(e){return e.preventDefault(),t.startEdit(s)}}},[t._v("Approuver")]),e("button",{on:{click:function(e){return e.preventDefault(),t.showDetails(s)}}},[t._v("Detail")])])])])})),0)])]),e("DetailsDialog",{attrs:{visible:t.details_opened,commande:t.active_commande},on:{close:function(e){t.details_opened=!1}}})],1)},ds=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"panier-item"},[e("th",[t._v("#")]),e("th",[t._v("User")]),e("th",[t._v("Numero de Order")]),e("th",[t._v("Date ordered")]),e("th",[t._v("Status")]),e("th")])])}],us=function(){var t=this,e=t._self._c;return e("div",{class:{popup:!0,active:t.visible},on:{click:t.close}},[e("div",{staticClass:"popup-body",on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[e("center",[e("h2",[t._v("Order")])]),0==t.commandes.length?e("div",[t._v(t._s(t.action))]):e("div",{staticClass:"scrollable-tab"},[e("table",{staticClass:"table commandes"},[t._m(0),e("tbody",{attrs:{id:"commandes"}},t._l(t.commandes.results,(function(s,a){return e("tr",[e("td",{staticStyle:{color:"#aaa"}},[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.product.materiel))]),e("td",[t._v(t._s(s.quantity)+" "+t._s(s.product.unite))])])})),0)])])],1)])},ms=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"panier-item"},[e("th",[t._v("id")]),e("th",[t._v("Produit")]),e("th",[t._v("Quantites")])])])}],hs={data(){return{commandes:[],action:"récuperation des commandes..."}},props:{visible:{type:Boolean,default:!1},commande:{type:Object,required:!0}},watch:{visible(t){if(this.visible){this.$store.state.user.access;l().get(this.$store.state.url+"/orderItem/?order="+this.commande.id,this.header).then((t=>{this.commandes=t.data,this.action="pas de details.",console.log(t.data)})).catch((t=>{console.error(t)}))}}},methods:{close(){this.$emit("close")}}},ps=hs,vs=(0,m.Z)(ps,us,ms,!1,null,"4338103b",null),_s=vs.exports,fs={components:{DetailsDialog:_s},data(){return{csvData:{},items:this.$store.state.commandes,active_item:{},details_opened:!1,active_commande:{},edit_mode:!1,achat_mode:!1,add_mode:!1,search_term:""}},watch:{"$store.state.commandes"(t){this.items=t},search_term(t){this.dosearch(t)}},methods:{dosearch(t){l().get(this.$store.state.url+`/order/?search=${this.search_term}`,this.header).then((t=>{this.$store.state.commandes=t.data})).catch((t=>{console.error(t)}))},fetchCommandes(){l().get(this.$store.state.url+"/order/",this.header).then((t=>{this.$store.state.commandes=t.data,this.items=t.data.results,console.log(t.data)})).catch((t=>{if("token_not_valid"==t.response.data.code){let t={refresh:this.$store.state.user.refresh};l().post(this.$store.state.url+"/refresh/",t).then((t=>{this.$store.state.user.access=t.data.access,this.fetchCommandes()})).catch((t=>{this.$store.state.user=null}))}}))},exitEdition(){this.active_item={},this.edit_mode=!1,this.achat_mode=!1,this.add_mode=!1},startEdit(t){this.active_item=t,this.edit_mode=!0},showDetails(t){this.active_commande=t,this.details_opened=!0},performFilter(t){let e=this.$store.state.products.filter((e=>e.id==t|e.nom.toLowerCase().includes(t.toLowerCase())));this.items=e},download(t){const e=new Blob([t],{type:"text/csv"}),s=window.URL.createObjectURL(e),a=document.createElement("a");a.setAttribute("hidden",""),a.setAttribute("href",s),a.setAttribute("download","model.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},generateCSV(){let t=this.items,e="id;produit;quantite;prix_achat;details\n";for(var s=0;s<t.length;s++)e+=t[s].id+";"+t[s].nom+"\n";console.log(e),this.download(e)},level(t){return 0==t?"empty":t<=5?"low":void 0},uploadCSV(t){if(t.target.files&&t.target.files[0]){let e=new FileReader;e.readAsBinaryString(t.target.files[0]),e.onload=t=>{console.log(t),this.csvData.size=t.total,this.csvData.fileData=t.target.result;let e=this.convertToJSON(this.csvData.fileData);console.log(e),console.table(e)}}},convertToJSON(t){let e=t.trim().split("\n"),s=[],a=e[0].split(";"),i=[],r={};e=e.slice(1);for(let o=0;o<e.length;o++){i=e[o].split(";");for(let t=0;t<i.length;t++)if(0===i.indexOf(i[t])||isNaN(i[t]))r[a[t]]=i[t];else{let e=Number.parseFloat(i[t]);r[a[t]]=e.toFixed(2)}s.push(r),r={}}return s}},mounted(){document.title="Commande |Labo",this.fetchCommandes()}},gs=fs,bs=(0,m.Z)(gs,ls,ds,!1,null,"cc97e692",null),Cs=bs.exports,ys=function(){var t=this,e=t._self._c;return e("div",{staticClass:"parent"},[e("h3",[t._v("Mes commandes")]),e("div",{staticClass:"form-inline my-2 my-lg-0 top",staticStyle:{float:"left","padding-left":"20px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search_term,expression:"search_term"}],staticClass:"form-control mr-sm-2",attrs:{type:"text",placeholder:"Search","aria-label":"Search"},domProps:{value:t.search_term},on:{input:function(e){e.target.composing||(t.search_term=e.target.value)}}})]),t.$store.state.user.groups.includes("Agent Stock2")?e("i",{staticClass:"fa fa-paper-plane btn desos",attrs:{"aria-hidden":"true"},on:{click:function(e){return e.preventDefault(),t.envoye.apply(null,arguments)}}}):t._e(),t.$store.state.user.groups.includes("Departement")?e("i",{staticClass:"fa fa-paper-plane btn desos",attrs:{"aria-hidden":"true"},on:{click:function(e){return e.preventDefault(),t.envoyer.apply(null,arguments)}}}):t._e(),t.$store.state.user.groups.includes("Decanat")?e("i",{staticClass:"fa fa-paper-plane btn desos",attrs:{"aria-hidden":"true"},on:{click:function(e){return e.preventDefault(),t.envoyee.apply(null,arguments)}}}):t._e(),e("br"),e("br"),e("br"),e("br"),0==t.items?e("div",[e("h3",{staticClass:"vide"},[t._v("Pas de commande déjà effectue ...")])]):e("div",{staticClass:"scrollable-tab",staticStyle:{"padding-top":"10px"}},[e("table",{staticClass:"table paiements"},[t._m(0),e("tbody",{attrs:{id:"paiements"}},t._l(t.items,(function(s,a){return e("tr",[e("td",[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.utilisateur.user.username))]),e("td",[t._v(t._s(s.utilisateur.departement.name))]),e("td",[t._v(t._s(s.num_commande))]),e("td",[t._v(t._s(t.datetime(s.date_commande)))]),e("td",[e("div",{staticClass:"btns"},[e("button",{on:{click:function(e){return e.preventDefault(),t.showDetails(s)}}},[t._v("Detail")]),"False"==s.envoye?e("button",{staticStyle:{"background-color":"white"}},[e("i",{staticClass:"fa fa-trash-o",staticStyle:{"font-size":"24px",color:"red"},on:{click:function(e){return e.preventDefault(),t.Delete(s)}}})]):t._e(),t.$store.state.user.groups.includes("admin")?e("button",{on:{click:function(e){return t.gotoProduct(s)}}},[t._v("Creer bon")]):t._e()])])])})),0)])]),e("DetailsDialog",{attrs:{visible:t.details_opened,commande:t.active_commande},on:{close:function(e){t.details_opened=!1}}}),e("ProduitDialog",{attrs:{visible:t.add_mode},on:{close:t.exitEdition}})],1)},ws=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"panier-item"},[e("th",[t._v("#")]),e("th",[t._v("User")]),e("th",[t._v("Departement")]),e("th",[t._v("Numero de Commande")]),e("th",[t._v("Date commande")]),e("th",[t._v("Action")]),e("th")])])}],$s=function(){var t=this,e=t._self._c;return e("div",{class:{popup:!0,active:t.visible},on:{click:t.close}},[e("div",{staticClass:"popup-body",on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[e("center",[e("h2",[t._v("Commande")])]),0==t.commandes.length?e("div",[t._v(t._s(t.action))]):e("div",{staticClass:"scrollable-tab"},[e("table",{staticClass:"table commandes"},[t._m(0),e("tbody",{attrs:{id:"commandes"}},t._l(t.commandes.results,(function(s,a){return e("tr",[e("td",{staticStyle:{color:"#aaa"}},[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.commande.num_commande))]),e("td",[t._v(t._s(s.product.reference))]),e("td",[t._v(t._s(s.qte_commande)+" "+t._s(s.product.unite))])])})),0)])])],1)])},xs=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"panier-item"},[e("th",[t._v("id")]),e("th",[t._v("Commande")]),e("th",[t._v("Produit")]),e("th",[t._v("Quantites")])])])}],Ss={data(){return{commandes:[],action:"récuperation des commandes..."}},props:{visible:{type:Boolean,default:!1},commande:{type:Object,required:!0}},watch:{visible(t){if(this.visible){this.$store.state.user.access;l().get(this.$store.state.url+"/commandeItem/?commande="+this.commande.id,this.header).then((t=>{this.commandes=t.data,this.action="pas de details.",console.log(t.data)})).catch((t=>{console.error(t)}))}}},methods:{close(){this.$emit("close")}}},ks=Ss,qs=(0,m.Z)(ks,$s,xs,!1,null,"6c83d4eb",null),Ps=qs.exports,Ds={components:{DetailsDialog:Ps,ProduitDialog:Vt},data(){return{csvData:{},items:this.$store.state.commandes,active_item:{},commandes:this.$store.state.commandes,details_opened:!1,active_commande:{},edit_mode:!1,achat_mode:!1,add_mode:!1,search_term:""}},watch:{"$store.state.commandes"(t){this.items=t},search_term(t){this.dosearch(t)}},computed:{utilisateur(){return this.$store.state.user}},methods:{successAlert1(){this.$swal({type:"success",title:"Envoyer au Departement",text:"Vos commandes sont envoyees!!!"})},successAlert2(){this.$swal({type:"success",title:"Envoyer au Decanat",text:"Vos commandes sont envoyees!!!"})},successAlert3(){this.$swal({type:"success",title:"Envoyer à la direction de recherche",text:"Vos commandes sont envoyees!!!"})},status1(t){if("true"==t)return"empty1"},status2(t){if("true"==t)return"empty2"},status3(t){if("true"==envoyeee)return"empty3"},envoyer(){l().get(this.$store.state.url+"/commande/envoyer-all/",this.header).then((t=>{this.successAlert2(),console.log(t.data)}))},envoyee(){l().get(this.$store.state.url+"/commande/envoyee-all/",this.header).then((t=>{this.successAlert3()}))},envoye(){l().get(this.$store.state.url+"/commande/envoye-all/",this.header).then((t=>{this.successAlert1()}))},Delete(t){confirm("Delete "+t.id)&&l()["delete"](this.$store.state.url+`/commande/${t.id}/`,this.header).then((t=>(this.fetchCommandes(),t)))},dosearch(t){l().get(this.$store.state.url+`/commande/?search=${this.search_term}`,this.header).then((t=>{this.$store.state.commandes=t.data})).catch((t=>{console.error(t)}))},fetchCommandes(){l().get(this.$store.state.url+"/commande/",this.header).then((t=>{this.$store.state.commandes=t.data,this.items=t.data.results})).catch((t=>{if("token_not_valid"==t.response.data.code){let t={refresh:this.$store.state.user.refresh};l().post(this.$store.state.url+"/refresh/",t).then((t=>{this.$store.state.user.access=t.data.access,this.fetchCommandes()})).catch((t=>{}))}}))},exitEdition(){this.active_item={},this.edit_mode=!1,this.achat_mode=!1,this.add_mode=!1},showDetails(t){this.active_commande=t,this.details_opened=!0},gotoProduct(t){this.$store.state.selected_commande=t,this.$router.push("/products")},startEdit(t){this.active_item=t,this.edit_mode=!0},startAchat(t){this.active_item=t,this.achat_mode=!0},performFilter(t){let e=this.$store.state.products.filter((e=>e.id==t|e.nom.toLowerCase().includes(t.toLowerCase())));this.items=e},download(t){const e=new Blob([t],{type:"text/csv"}),s=window.URL.createObjectURL(e),a=document.createElement("a");a.setAttribute("hidden",""),a.setAttribute("href",s),a.setAttribute("download","model.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},generateCSV(){let t=this.items,e="id;produit;quantite;prix_achat;details\n";for(var s=0;s<t.length;s++)e+=t[s].id+";"+t[s].nom+"\n";console.log(e),this.download(e)},level(t){return 0==t?"empty":t<=5?"low":void 0},uploadCSV(t){if(t.target.files&&t.target.files[0]){let e=new FileReader;e.readAsBinaryString(t.target.files[0]),e.onload=t=>{console.log(t),this.csvData.size=t.total,this.csvData.fileData=t.target.result;let e=this.convertToJSON(this.csvData.fileData);console.log(e),console.table(e)}}},convertToJSON(t){let e=t.trim().split("\n"),s=[],a=e[0].split(";"),i=[],r={};e=e.slice(1);for(let o=0;o<e.length;o++){i=e[o].split(";");for(let t=0;t<i.length;t++)if(0===i.indexOf(i[t])||isNaN(i[t]))r[a[t]]=i[t];else{let e=Number.parseFloat(i[t]);r[a[t]]=e.toFixed(2)}s.push(r),r={}}return s}},mounted(){document.title="Commande |Labo",this.fetchCommandes()}},Is=Ds,Ls=(0,m.Z)(Is,ys,ws,!1,null,"d251c7a4",null),Ns=Ls.exports,Os=function(){var t=this,e=t._self._c;return e("div",{staticClass:"parent"},[e("h3",{staticStyle:{"text-align":"center","text-transform":"uppercase"}},[t._v("Bon commandes")]),e("div",{staticClass:"form-inline my-2 my-lg-0 top",staticStyle:{float:"left",padding:"20px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search_term,expression:"search_term"}],staticClass:"form-control mr-sm-2",attrs:{type:"text",placeholder:"Search","aria-label":"Search"},domProps:{value:t.search_term},on:{input:function(e){e.target.composing||(t.search_term=e.target.value)}}})]),e("br"),0==t.items?e("div",[e("h3",{staticClass:"vide"},[t._v("Pas de bon de commande effectue ...")])]):e("div",{staticClass:"scrollable-tab"},[e("table",{staticClass:"table paiements"},[t._m(0),e("tbody",{attrs:{id:"paiements"}},t._l(t.items,(function(s,a){return e("tr",[e("td",[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.utilisateur.user.username))]),e("td",[t._v(t._s(s.utilisateur.departement.name))]),e("td",[t._v(t._s(s.commande.num_commande))]),e("td",[t._v(t._s(s.num_bon))]),e("td",[t._v(t._s(t.datetime(s.date_livraison)))]),e("td",[e("div",{staticClass:"btns"},[e("button",{on:{click:function(e){return e.preventDefault(),t.showDetails(s)}}},[t._v("Detail")])])])])})),0)])]),e("DetailsDialog",{attrs:{visible:t.details_opened,commande:t.active_commande},on:{close:function(e){t.details_opened=!1}}})],1)},Ts=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"panier-item"},[e("th",[t._v("#")]),e("th",[t._v("User")]),e("th",[t._v("Departement")]),e("th",[t._v("Commande")]),e("th",[t._v("Numero de bon")]),e("th",[t._v("Date de bon")]),e("th")])])}],As=function(){var t=this,e=t._self._c;return e("div",{class:{popup:!0,active:t.visible},on:{click:t.close}},[e("div",{staticClass:"popup-body",on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[e("center",[e("h2",[t._v("Bon de Commande")])]),0==t.commandes.length?e("div",[t._v(t._s(t.action))]):e("div",{staticClass:"scrollable-tab"},[e("table",{staticClass:"table commandes"},[t._m(0),e("tbody",{attrs:{id:"commandes"}},t._l(t.commandes.results,(function(s,a){return e("tr",[e("td",{staticStyle:{color:"#aaa"}},[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.bonLivraison.commande.num_commande))]),e("td",[t._v(t._s(s.bonLivraison.num_bon))]),e("td",[t._v(t._s(s.product.materiel))]),e("td",[t._v(t._s(s.qte_livree)+" "+t._s(s.product.unite))]),e("td",[t._v(t._s(s.qte_restante)+" "+t._s(s.product.unite))])])})),0)])])],1)])},Fs=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"panier-item"},[e("th",[t._v("#")]),e("th",[t._v("Commande")]),e("th",[t._v("Bon Livraison")]),e("th",[t._v("Produit")]),e("th",[t._v("Quantites Livrees")]),e("th",[t._v("Quantites Restante")])])])}],Bs={data(){return{commandes:[],action:"récuperation des commandes..."}},props:{visible:{type:Boolean,default:!1},commande:{type:Object,required:!0}},watch:{visible(t){if(this.visible){this.$store.state.user.access;l().get(this.$store.state.url+"/bonLivraisonItems/?bonLivraison="+this.commande.id,this.header).then((t=>{this.commandes=t.data,this.action="pas de details.",console.log(t.data)})).catch((t=>{console.error(t)}))}}},methods:{close(){this.$emit("close")}}},Zs=Bs,Es=(0,m.Z)(Zs,As,Fs,!1,null,"785b57b8",null),Qs=Es.exports,Us={components:{DetailsDialog:Qs},data(){return{csvData:{},items:this.$store.state.commandes,active_item:{},details_opened:!1,active_commande:{},edit_mode:!1,achat_mode:!1,add_mode:!1,search_term:""}},watch:{"$store.state.commandes"(t){this.items=t},search_term(t){this.dosearch(t)}},methods:{dosearch(t){l().get(this.$store.state.url+`/bonLivraison/?search=${this.search_term}`,this.header).then((t=>{this.$store.state.commandes=t.data})).catch((t=>{console.error(t)}))},fetchCommandes(){l().get(this.$store.state.url+"/bonLivraison/",this.header).then((t=>{this.$store.state.commandes=t.data,this.items=t.data.results})).catch((t=>{this.$store.state.user=null}))},exitEdition(){this.active_item={},this.edit_mode=!1,this.achat_mode=!1,this.add_mode=!1},showDetails(t){this.active_commande=t,this.details_opened=!0},startEdit(t){this.active_item=t,this.edit_mode=!0},startAchat(t){this.active_item=t,this.achat_mode=!0},performFilter(t){let e=this.$store.state.products.filter((e=>e.id==t|e.nom.toLowerCase().includes(t.toLowerCase())));this.items=e},download(t){const e=new Blob([t],{type:"text/csv"}),s=window.URL.createObjectURL(e),a=document.createElement("a");a.setAttribute("hidden",""),a.setAttribute("href",s),a.setAttribute("download","model.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},generateCSV(){let t=this.items,e="id;produit;quantite;prix_achat;details\n";for(var s=0;s<t.length;s++)e+=t[s].id+";"+t[s].nom+"\n";console.log(e),this.download(e)},level(t){return 0==t?"empty":t<=5?"low":void 0},uploadCSV(t){if(t.target.files&&t.target.files[0]){let e=new FileReader;e.readAsBinaryString(t.target.files[0]),e.onload=t=>{console.log(t),this.csvData.size=t.total,this.csvData.fileData=t.target.result;let e=this.convertToJSON(this.csvData.fileData);console.log(e),console.table(e)}}},convertToJSON(t){let e=t.trim().split("\n"),s=[],a=e[0].split(";"),i=[],r={};e=e.slice(1);for(let o=0;o<e.length;o++){i=e[o].split(";");for(let t=0;t<i.length;t++)if(0===i.indexOf(i[t])||isNaN(i[t]))r[a[t]]=i[t];else{let e=Number.parseFloat(i[t]);r[a[t]]=e.toFixed(2)}s.push(r),r={}}return s}},mounted(){document.title="Commande |Labo",this.fetchCommandes()}},Js=Us,zs=(0,m.Z)(Js,Os,Ts,!1,null,"38ce1e48",null),Rs=zs.exports,js=function(){var t=this,e=t._self._c;return e("div",{staticClass:"products"},[e("h1",[t._v("All Products")]),e("hr"),t._l(t.products.results,(function(t){return e("ProductItem",{key:t.id,staticClass:"products__item",attrs:{product:t}})}))],2)},Vs=[],Ms=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("body",[e("main",[e("div",{staticClass:"cards"},[e("div",{staticClass:"card__title"},[t._m(0),e("h3",[t._v(t._s(t.product.reference))])]),e("div",{staticClass:"card__body"},[e("div",{staticClass:"half"},[e("div",{staticClass:"featured_text"},[e("p",[t._v(t._s(t.product.materiel))]),e("p",{staticClass:"price",staticStyle:{color:"white"}},[t._v(t._s(t.product.quantite)+" "+t._s(t.product.unite))])])]),e("div",{staticClass:"half"},[e("div",{staticClass:"description"},[e("p",{staticStyle:{color:"white"}},[t._v(t._s(t.product.designation))])]),t._m(1),t._m(2)])]),e("div",{staticClass:"card__footer"},[e("div",{staticClass:"action"},[e("p",{staticClass:"text-center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],staticClass:"form-control",attrs:{type:"float",placeholder:"Qty",min:"1"},domProps:{value:t.quantity},on:{input:function(e){e.target.composing||(t.quantity=e.target.value)}}})]),e("button",{attrs:{type:"button"},on:{click:function(e){return t.AddToCartbon(t.product)}}},[t._v("Add to cart")])])])])])])])},Gs=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"icon"},[e("a",{attrs:{href:"#"}},[e("i",{staticClass:"fa fa-arrow-left"})])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"stock"},[e("i",{staticClass:"fa fa-pen"}),t._v(" In stock")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"reviews"},[e("ul",{staticClass:"stars"},[e("li",[e("i",{staticClass:"fa fa-star"})]),e("li",[e("i",{staticClass:"fa fa-star"})]),e("li",[e("i",{staticClass:"fa fa-star"})]),e("li",[e("i",{staticClass:"fa fa-star"})]),e("li",[e("i",{staticClass:"fa fa-star-o"})])])])}],Ys={name:"ProductsItem",props:["product"],data(){return{quantity:1,items:this.$store.state.products}},mounted(){l().get(this.$store.state.url+"/produit/",this.header).then((t=>{this.$store.state.products=t.data,this.items=t.data.results})).catch((t=>{console.error(t)}))},methods:{AddToCartbon(){(isNaN(this.quantity)||this.quantity<1)&&(this.quantity=1);const t={product:this.product,quantity:this.quantity};this.$store.commit("AddToCartbon",t)},getIcon(t){return null==t.image?"/img/item.png":t.image},increaseQtt:function(){this.cartbon.add(this.item)},decreaseQtt:function(){this.cartbon.decrease(this.item.id)},enableEdition(){0!=this.item.quantite&&(this.editable=!0)}},computed:{qtt:{get(){return this.cartbon.getQuantite(this.item.id)},set(t){0!=t.length&&this.cartbon.add(this.item,t)}}}},Ws=Ys,Hs=(0,m.Z)(Ws,Ms,Gs,!1,null,"78752d10",null),Ks=Hs.exports,Xs={components:{ProductItem:Ks},name:"product",data(){return{products:[],id:this.$route.params.id}},mounted(){l().get(this.$store.state.url+"/produit/",this.header).then((t=>{this.products=t.data,console.log(t.data)})).catch((t=>{console.error(t)}))}},ta=Xs,ea=(0,m.Z)(ta,js,Vs,!1,null,null,null),sa=ea.exports,aa=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-cart container"},[e("div",{staticClass:"columns is-multiline"},[t._m(0),e("div",{staticClass:"column is-12 box"},[t.cartTotalLength?e("table",{staticClass:"table is-fullwidth"},[t._m(1),e("tbody",t._l(t.cartbon.items,(function(s){return e("CartItem",{key:s.id,attrs:{initialItem:s},on:{removeFromCart:t.removeFromCart}})})),1)]):e("p",[t._v("You don't have any product in your cart...")])]),e("div",{staticClass:"container"},[e("h2",[t._v("Summary : "),e("strong",[t._v(" "+t._s(t.cartTotalLength))]),t._v(" items ")]),0!=t.cartTotalLength?e("center",[e("router-link",{staticClass:"btn btn-success",attrs:{to:"/cart/bon"}},[t._v("Checkout")])],1):t._e()],1)])])},ia=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"column is-12"},[e("h1",{staticClass:"title"},[t._v("Bon Cart")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v("Product")]),e("th",[t._v("Reference")]),e("th",[t._v("Qtes en stock")]),e("th",[t._v("Qte Livree")]),e("th",[t._v("Action")])])])}],ra=function(){var t=this,e=t._self._c;return e("tr",[e("th",[t._v(t._s(t.item.product.id))]),e("td",[e("router-link",{attrs:{to:t.item.product.get_absolute_url}},[t._v(t._s(t.item.product.materiel))])],1),e("th",[t._v(t._s(t.item.product.reference))]),e("th",[t._v(t._s(t.item.product.quantite)+" "+t._s(t.item.product.unite))]),e("td",[e("a",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return t.decrementQuantity(t.item)}}},[t._v("-")]),t._v("   "),e("a",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return t.incrementQuantity(t.item)}}},[t._v("+")]),t._v("   "+t._s(t.item.quantity)+t._s(t.item.product.unite)+" ")]),e("td",[e("button",{staticClass:"btn btn-danger btn-sm delete",on:{click:function(e){return t.removeFromCart(t.item)}}},[t._v("x")])])])},oa=[],na={name:"CartItem",props:{initialItem:Object},data(){return{item:this.initialItem}},methods:{getItemTotal(t){return t.quantity*t.product.price},decrementQuantity(t){t.quantity-=1,0===t.quantity&&this.$emit("removeFromCart",t),this.updateCart()},incrementQuantity(t){t.quantity+=1,this.updateCart()},updateCart(){localStorage.setItem("cartbon",JSON.stringify(this.$store.state.cartbon))},removeFromCart(t){this.updateCart(),this.$emit("removeFromCart",t)}}},ca=na,la=(0,m.Z)(ca,ra,oa,!1,null,"c47a8dbc",null),da=la.exports,ua={name:"Cart",components:{CartItem:da},data(){return{cartbon:{items:[]},id:this.$route.params.id}},mounted(){this.cartbon=this.$store.state.cartbon},methods:{ids(){console.log(this,id)},updateCart(){localStorage.setItem("cartbon",JSON.stringify(this.$store.state.cartbon))},removeFromCart(t){this.cartbon.items=this.cart.items.filter((e=>e.product.id!==t.product.id)),this.updateCart()}},computed:{cartTotalLength(){return this.cartbon.items.reduce(((t,e)=>t+parseFloat(e.quantity)),0)}}},ma=ua,ha=(0,m.Z)(ma,aa,ia,!1,null,"88ee54d8",null),pa=ha.exports,va=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"columns is-multiline"},[t._m(0),e("div",{staticClass:"column is-12"},[e("table",{staticClass:"table"},[t._m(1),e("tbody",t._l(t.cartbon.items,(function(s){return e("tr",{key:s.product.id},[e("td",[t._v(t._s(s.product.materiel))]),e("td",[t._v(t._s(s.product.reference))]),e("td",[t._v(t._s(s.quantity)+" "+t._s(s.product.unite))])])})),0)])]),e("hr",{staticStyle:{"background-color":"red"}}),e("div",{staticClass:"column1 is-8"},[e("h2",{staticClass:"subtitle"},[t._v("Bon details")]),e("div",{staticClass:"columns is-multiline"},[e("div",{staticClass:"column is-6"},[e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_nom"}},[t._v("Numero")]),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.num_bon,expression:"num_bon"}],attrs:{type:"text"},domProps:{value:t.num_bon},on:{input:function(e){e.target.composing||(t.num_bon=e.target.value)}}})])])]),t.errors.length?e("div",{staticClass:"notification is-danger mt-4"},t._l(t.errors,(function(s){return e("p",{key:s},[t._v(t._s(s))])})),0):t._e(),t.cartTotalLength?[e("br"),e("button",{staticClass:"btn btn-primary",on:{click:t.submitForm}},[t._v("Submit")])]:t._e(),e("hr")],2)])])},_a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"column is-12"},[e("h1",{staticClass:"title"},[t._v("Checkout bon")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Product")]),e("th",[t._v("Reference")]),e("th",[t._v("Quantite Livree")])])])}],fa={name:"Checkout",data(){return{commande:{num_commande:""},num_bon:"",cartbon:{items:[]},errors:[]}},mounted(){document.title="Bon Commande | Labo",this.cartbon=this.$store.state.cartbon},methods:{setId(){for(let t of this.$store.state.commandes)if(t.id==this.commande.id)return void(this.commande.num_commande=t.num_commande)},setName(){for(let t of this.$store.state.commandes)if(t.num_commande==this.commande.num_commande)return void(this.commande.id=t.id)},submitForm(){const t=[];let e={};for(let s=0;s<this.cartbon.items.length;s++){const e=this.cartbon.items[s],a={product:e.product.id,quantity:e.quantity};t.push(a)}e={commande:this.$store.state.selected_commande.id,num_bon:this.num_bon,utilisateur:this.$store.state.selected_commande.utilisateur.id,items:t},console.log(e),l().post(this.$store.state.url+"/bonLivraison/",e,this.header).then((t=>{this.$store.commit("clear"),this.$router.push("/cart/success")})).catch((t=>{this.errors.push("Something went wrong. Please try again"),console.log(t)})),this.$store.commit("setIsLoading",!1)}},computed:{host(){return this.$store.state.url},commandes(){return this.$store.state.commandes},username(){return this.$store.state.user.username},cartTotalPrice(){return this.cartbon.items.reduce(((t,e)=>t+e.product.price*e.quantity),0)},cartTotalLength(){return this.cartbon.items.reduce(((t,e)=>t+e.quantity),0)}}},ga=fa,ba=(0,m.Z)(ga,va,_a,!1,null,"7c8643ff",null),Ca=ba.exports,ya=function(){var t=this,e=t._self._c;return e("div",{staticClass:"parent",on:{click:function(e){t.popover_opened=!1}}},[e("h2",{staticStyle:{"text-align":"center","text-transform":"uppercase",margin:"10px",color:"teal"}},[t._v("Tous les utitlisateurs")]),e("div",{staticClass:"top"},[e("SearchBar",{attrs:{show_date:!1},on:{searched:t.searchItem}})],1),e("div",[e("button",{staticStyle:{float:"right","margin-right":"250px"},on:{click:function(e){return t.editUser(t.user)}}},[t._v(" Creer ")])]),e("div",{staticClass:"scrollable-tab"},[e("table",{staticClass:"table users"},[t._m(0),e("tbody",{attrs:{id:"users"}},t._l(t.users.results,(function(s,a){return e("tr",[e("td",[t._v(t._s(a+1))]),e("td",[t._v(t._s(s.username))]),e("td",[t._v(t._s(s.first_name))]),e("td",[t._v(t._s(s.last_name))]),e("td",[t._v(t._s(s.is_active))]),e("td",{staticClass:"groups"},t._l(s.groups,(function(s){return e("span",[t._v(" "+t._s(s)),e("span",{staticClass:"comma"},[t._v(",")])])})),0),e("td",[e("div",{staticClass:"btns"},[t.permited(s)?e("button",{on:{click:function(e){return t.editUser(s)}}},[t._v(" editer ")]):t._e(),t.$store.state.user.groups.includes("admin")?e("span",[s.is_active?e("button",{on:{click:function(e){return t.deactivateUser(s)}}},[t._v("desactiver")]):e("button",{on:{click:function(e){return t.activateUser(s)}}},[t._v("activer")])]):t._e()])])])})),0)])]),e("EditUser",{attrs:{visible:t.edit_mode,item:t.active_user},on:{close:t.exitEdition}})],1)},wa=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"panier-item"},[e("th",[t._v("#")]),e("th",[t._v("username")]),e("th",[t._v("prenom")]),e("th",[t._v("nom")]),e("th",[t._v("actif")]),e("th",[t._v("groupes")]),e("th",[t._v("options")])])])}],$a=function(){var t=this,e=t._self._c;return e("div",{class:{popup:!0,active:t.visible},on:{click:t.close}},[e("div",{staticClass:"popup-body",on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[t._m(0),e("form",{attrs:{method:"post"}},[e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_username"}},[t._v("Username:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_user.username,expression:"new_user.username"}],attrs:{type:"text",id:"id_username"},domProps:{value:t.new_user.username},on:{input:function(e){e.target.composing||t.$set(t.new_user,"username",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_first_name"}},[t._v("Prenom:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_user.first_name,expression:"new_user.first_name"}],attrs:{type:"text",id:"id_first_name"},domProps:{value:t.new_user.first_name},on:{input:function(e){e.target.composing||t.$set(t.new_user,"first_name",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_last_name"}},[t._v("Nom:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_user.last_name,expression:"new_user.last_name"}],attrs:{type:"text",id:"id_last_name"},domProps:{value:t.new_user.last_name},on:{input:function(e){e.target.composing||t.$set(t.new_user,"last_name",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_first_name"}},[t._v(" Mot de passe: ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_user.password,expression:"new_user.password"}],attrs:{type:"password",id:"id_psswd"},domProps:{value:t.new_user.password},on:{input:function(e){e.target.composing||t.$set(t.new_user,"password",e.target.value)}}})]),e("div",{staticClass:"field"},[e("label",{attrs:{for:"confirm"}},[t._v(" confirmation: ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.confirm,expression:"confirm"}],attrs:{type:"password",id:"confirm"},domProps:{value:t.confirm},on:{input:function(e){e.target.composing||(t.confirm=e.target.value)}}})]),t.is_admin?e("div",{staticClass:"field"},[e("label",{attrs:{for:"id_group"}},[t._v("Groupe:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.group,expression:"group"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.group=e.target.multiple?s:s[0]}}},t._l(t.groups,(function(s){return e("option",{domProps:{selected:t.user.groups.includes(s),value:s}},[t._v(" "+t._s(s)+" ")])})),0)]):t._e(),e("div",{staticClass:"buttons"},[e("div",{staticClass:"logs"},[t._v(t._s(t.logs))]),e("input",{attrs:{type:"submit",value:"Modifier"},on:{click:t.changerUser}})])])])])},xa=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"head"},[e("h3",{staticStyle:{color:"#007bff"}},[t._v("Modifier Utilisateur")]),e("hr")])}],Sa={props:{visible:{type:Boolean,default:!1},item:{type:Object,required:!0}},data(){return{logs:"",new_user:{},group:"",groups:["admin","gerant","caissier"],confirm:""}},computed:{is_admin(){return this.$store.state.user.is_admin}},watch:{item(t){this.new_user=JSON.parse(JSON.stringify(t))}},methods:{close(){this.$emit("close")},changerUser(){let t={username:this.new_user.username,first_name:this.new_user.first_name,last_name:this.new_user.last_name};if(this.group&&(t["group"]=this.group),this.new_user.password){if(this.new_user.password!=this.confirm)return void(this.logs="les mot de passes doivent être identiques");if(this.new_user.password.length<6)return void(this.logs="le mot de passe doit avoir au moins 6 caractères");t["password"]=this.new_user.password}let e={headers:{Authorization:"Bearer "+this.$store.state.user.access}};l().put(this.$store.state.url+`/user/${this.item.id}/`,t,e).then((t=>{Object.assign(this.item,t.data),this.$emit("close")})).catch((t=>{console.error(t)}))}}},ka=Sa,qa=(0,m.Z)(ka,$a,xa,!1,null,"759885de",null),Pa=qa.exports,Da={components:{SearchBar:Tt,EditUser:Pa},data(){return{query_date:!1,edit_mode:!1,users:this.$store.state.users,details_opened:!1,active_user:{groups:[]}}},mounted(){this.searchItem(),this.fetchData(),document.title="All users | Gestion Labo"},methods:{editable(t){return this.$store.state.user.is_admin&&t.id!=this.$store.state.user.id},permited(t){return this.$store.state.user.is_admin||this.$store.state.user.id==t.id},searchItem(t){let e={};if(""==t)return this.fetchData();e=this.query_date||""==t?this.users.filter((e=>e.id==t|e.client.toLowerCase().includes(t.toLowerCase()))):this.$store.state.users.filter((e=>e.id==t|e.client.toLowerCase().includes(t.toLowerCase()))),this.users=e},fetchData(){let t={headers:{Authorization:"Bearer "+this.$store.state.user.access}};0==this.$store.state.users.length&&l().get(this.$store.state.url+"/user/",t).then((t=>{this.$store.state.users=t.data,this.users=t.data,console.log(t.data)})).catch((t=>{t.response||console.error(t)}))},headers(){return{headers:{Authorization:"Bearer "+this.$store.state.user.access}}},deactivateUser(t){confirm("voulez-vous vraiment arreter cette utilisateur?")&&l().put(this.$store.state.url+`/user/${t.id}/`,{is_active:!1},this.headers()).then((e=>{Object.assign(t,e.data)})).catch((t=>{console.error(t)}))},activateUser(t){confirm("voulez-vous mettre cette utilisateur en action?")&&l().put(this.$store.state.url+`/user/${t.id}/`,{is_active:!0},this.headers()).then((e=>{Object.assign(t,e.data)})).catch((t=>{console.error(t)}))},exitEdition(t){this.edit_mode=!1},editUser(t){this.edit_mode=!0,this.active_user=t}}},Ia=Da,La=(0,m.Z)(Ia,ya,wa,!1,null,"05e1f66b",null),Na=La.exports;a.ZP.use(N.ZP);const Oa=[{path:"/",name:"",component:R},{path:"/home",name:"home",component:R},{path:"/domain/:id/category",name:"category",component:ct},{path:"/category/:id/products",name:"product",component:kt},{path:"/stock",name:"stockcentral",component:se},{path:"/stock-labo",name:"stock",component:Ce},{path:"/orders",name:"Orders",component:Cs},{path:"/command",name:"commande",component:Ns},{path:"/bon-commande",name:"BonCommande",component:Rs},{path:"/products",name:"Allproducts",component:sa},{path:"/cart/checkout",name:"Checkout",component:We},{path:"/cart/checkorder",name:"checkorder",component:ss},{path:"/cart/bon",name:"checkbon",component:Ca},{path:"/cart/success",name:"Success",component:cs},{path:"/cart-order",name:"CartOrder",component:Re},{path:"/cart",name:"Cart",component:Ne},{path:"/bon",name:"Boncart",component:pa},{path:"/users",name:"users",component:Na}],Ta=new N.ZP({mode:"history",base:"/",routes:Oa});var Aa=Ta,Fa=s(629);a.ZP.use(Fa.ZP);var Ba=new Fa.ZP.Store({state:{user:null,url:"/api",users:[],domains:[],categories:[],laboratoires:[],products:[],orders:[],orderitems:[],bonLivraisonItems:[],bonLivraisons:[],selected_commande:null,cart:{items:[]},carts:{items:[]},cartbon:{items:[]}},mutations:{initiallizeStore(t){localStorage.getItem("cart")?t.cart=JSON.parse(localStorage.getItem("cart")):localStorage.setItem("cart",JSON.stringify(t.cart)),localStorage.getItem("token")?(t.token=localStorage.getItem("token"),t.isAuthenticated=!0):(t.token="",t.isAuthenticated=!1)},addToCart(t,e){const s=t.cart.items.filter((t=>t.product.id===e.product.id));s.length?s[0].quantity=parseFloat(s[0].quantity)+parseFloat(e.quantity):t.cart.items.push(e),localStorage.setItem("cart",JSON.stringify(t.cart))},AddToCart(t,e){const s=t.carts.items.filter((t=>t.product.id===e.product.id));s.length?s[0].quantity=parseFloat(s[0].quantity)+parseFloat(e.quantity):t.carts.items.push(e),localStorage.setItem("carts",JSON.stringify(t.carts))},AddToCartbon(t,e){const s=t.cartbon.items.filter((t=>t.product.id===e.product.id));s.length?s[0].quantity=parseFloat(s[0].quantity)+parseFloat(e.quantity):t.cartbon.items.push(e),localStorage.setItem("cartbon",JSON.stringify(t.cartbon))},setIsLoading(t,e){t.isLoading=e},clearCart(t){t.cart={items:[]},localStorage.setItem("cart",JSON.stringify(t.cart))},clear(t){t.carts={items:[]},localStorage.setItem("carts",JSON.stringify(t.carts))},clearbon(t){t.cartbon={items:[]},localStorage.setItem("cartbon",JSON.stringify(t.cartbon))}}}),Za=s(636),Ea=s(810),Qa=s(417);Za.vI.add(Qa.mRB),a.ZP.component("fas-icon",Ea.GN);var Ua=s(982),Ja=s.n(Ua);a.ZP.use(Ja()),Za.vI.add(Qa.sq$,Qa.IA$,Qa.FVb,Qa.koM,Qa.IwR,Qa.I7k,Qa.LEp,Qa.oFW,Qa.oTz,Qa.q7m,Qa.cf$),a.ZP.component("fas",Ea.GN),a.ZP.mixin({computed:{header(){return{headers:{Authorization:`Bearer ${this.$store.state.user.access}`}}}},methods:{money(t){return void 0==t||null==t?"-":t.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},datetime(t){if(!t)return"-";let e=new Date(t);return new Intl.DateTimeFormat("en-GB",{dateStyle:"short",timeStyle:"short"}).format(e)},userIs(t){return this.user.groups.includes(t)}}}),a.ZP.config.productionTip=!1,new a.ZP({router:Aa,store:Ba,render:t=>t(L)}).$mount("#app")}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var r=e[a]={exports:{}};return t[a].call(r.exports,r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,a,i,r){if(!a){var o=1/0;for(d=0;d<t.length;d++){a=t[d][0],i=t[d][1],r=t[d][2];for(var n=!0,c=0;c<a.length;c++)(!1&r||o>=r)&&Object.keys(s.O).every((function(t){return s.O[t](a[c])}))?a.splice(c--,1):(n=!1,r<o&&(o=r));if(n){t.splice(d--,1);var l=i();void 0!==l&&(e=l)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[a,i,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,r,o=a[0],n=a[1],c=a[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(i in n)s.o(n,i)&&(s.m[i]=n[i]);if(c)var d=c(s)}for(e&&e(a);l<o.length;l++)r=o[l],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(d)},a=self["webpackChunkgestionlabui"]=self["webpackChunkgestionlabui"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(812)}));a=s.O(a)})();
//# sourceMappingURL=app.cbcc88e8.js.map